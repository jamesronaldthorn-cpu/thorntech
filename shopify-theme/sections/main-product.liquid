<div class="product-template__container page-width" id="ProductSection-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="product" data-enable-history-state="true">
  <div class="grid product-single">
    <div class="grid__item product-single__media-group">
      {%- for media in product.media -%}
        <div class="product-single__media">
          <img src="{{ media | image_url: width: 800 }}" alt="{{ media.alt | escape }}" class="w-full">
        </div>
      {%- endfor -%}
    </div>

    <div class="grid__item product-single__meta">
      <h1 class="product-single__title">{{ product.title }}</h1>
      
      <div class="product__price">
        <span class="price-item price-item--regular">
          {{ product.price | money }}
        </span>
        <span class="tax-note text-sm text-muted">inc. VAT</span>
      </div>

      {%- if shop.taxes_included or shop.shipping_policy.body != blank -%}
        <div class="product__policies rte">
          {%- if shop.taxes_included -%}
            {{ 'products.product.include_taxes' | t }}
          {%- endif -%}
          {%- if shop.shipping_policy.body != blank -%}
            {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- form 'product', product, id: "AddToCartForm", class: "form product-form" -%}
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        
        <div class="product-form__controls-group">
          <div class="product-form__item product-form__item--quantity">
            <label for="Quantity-{{ section.id }}">{{ 'products.product.quantity' | t }}</label>
            <input type="number" id="Quantity-{{ section.id }}" name="quantity" value="1" min="1" class="product-form__input" pattern="[0-9]*">
          </div>
        </div>

        <div class="product-form__error-message-wrapper product-form__error-message-wrapper--hidden" data-error-message-wrapper role="alert">
          <span class="product-form__error-message" data-error-message></span>
        </div>

        <div class="product-form__controls-group product-form__controls-group--submit">
          <div class="product-form__item product-form__item--submit">
            <button type="submit" name="add" id="AddToCart-{{ section.id }}" class="btn btn-primary w-full" {% unless product.available %}disabled="disabled"{% endunless %}>
              <span id="AddToCartText-{{ section.id }}">
                {% unless product.available %}
                  {{ 'products.product.sold_out' | t }}
                {% else %}
                  ADD TO BASKET
                {% endunless %}
              </span>
            </button>
            
            {%- if section.settings.enable_payment_button -%}
              {{ form | payment_button }}
            {%- endif -%}
          </div>
        </div>
      {%- endform -%}

      <div class="product-single__description rte">
        {{ product.description }}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Product pages",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_payment_button",
      "label": "Show dynamic checkout button",
      "info": "Each customer will see their preferred payment method from those available on your store, such as PayPal or Apple Pay.",
      "default": true
    }
  ]
}
{% endschema %}
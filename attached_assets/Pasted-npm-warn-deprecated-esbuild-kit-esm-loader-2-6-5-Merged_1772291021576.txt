npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.                                                                                                                                                                                                                                             is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.                                                                                                                                                                                                                                             is

added 419 packages, and audited 420 packages in 7s

54 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (1 low, 5 moderate, 1 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.11.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.11.0
npm notice To update run: npm install -g npm@11.11.0
npm notice

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/thorntech/drizzle.config.ts'
Using 'pg' driver for database querying
[⣷] Pulling schema from database...
error: password authentication failed for user "thorntech"
    at /var/www/thorntech/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5                                                                                                                                                                                                                                             )
    at async Object.query (/var/www/thorntech/node_modules/drizzle-kit/bin.cjs:8                                                                                                                                                                                                                                             0622:26)
    at async fromDatabase2 (/var/www/thorntech/node_modules/drizzle-kit/bin.cjs:                                                                                                                                                                                                                                             19276:25) {
  length: 105,
  severity: 'FATAL',
  code: '28P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'auth.c',
  line: '331',
  routine: 'auth_failed'
}

> rest-express@1.0.0 build
> tsx script/build.ts

building client...
vite v7.3.1 building client environment for production...
✓ 1828 modules transformed.
rendering chunks (1)...[meta-images] no Replit deployment domain found, skipping                                                                                                                                                                                                                                              meta tag updates
../dist/public/index.html                       1.40 kB │ gzip:   0.58 kB
../dist/public/assets/logo-BFk2Yk2T.png       777.57 kB
../dist/public/assets/hero-bg-Y8bzrNyO.png  1,322.76 kB
../dist/public/assets/index-CyEGyOF3.css      101.44 kB │ gzip:  16.58 kB
../dist/public/assets/index-B8NGgKbh.js       394.23 kB │ gzip: 122.43 kB
✓ built in 2.96s
building server...

  dist/index.cjs  1.1mb ⚠️

⚡ Done in 272ms

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs

/var/www/thorntech/dist/index.cjs:59
`);fs.write(S_.format.apply(S_,e))}}Object.defineProperty(Vt.exports,"isWin",{ge                                                                                                                                                                                                                                             t:function(){return Io},set:function(t){Io=t}});Vt.exports.warnTo=function(t){va                                                                                                                                                                                                                                             r e=fs;return fs=t,e};Vt.exports.getFileName=function(t){var e=t||process.env,r=                                                                                                                                                                                                                                             e.PGPASSFILE||(Io?__.join(e.APPDATA||"./","postgresql","pgpass.conf"):__.join(e.                                                                                                                                                                                                                                             HOME||"./",".pgpass"));return r};Vt.exports.usePgPass=function(t,e){return Objec                                                                                                                                                                                                                                             t.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Io?!0:(e=e||"<unkn>                                                                                                                                                                                                                                             ",bR(t.mode)?t.mode&(vR|gR)?(Uf('WARNING: password file "%s" has group or world                                                                                                                                                                                                                                              access; permissions should be u=rw (0600) or less',e),!1):!0:(Uf('WARNING: passw                                                                                                                                                                                                                                             ord file "%s" is not a plain file',e),!1))};var _R=Vt.exports.match=function(t,e                                                                                                                                                                                                                                             ){return Dn.slice(0,-1).reduce(function(r,n,i){return i==1&&Number(t[n]||hR)===N                                                                                                                                                                                                                                             umber(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};Vt.exports.getPassword=func                                                                                                                                                                                                                                             tion(t,e,r){var n,i=e.pipe(mR());function s(l){var c=SR(l);c&&TR(c)&&_R(t,c)&&(n                                                                                                                                                                                                                                             =c[wR],i.end())}var a=function(){e.destroy(),r(n)},o=function(l){e.destroy(),Uf(                                                                                                                                                                                                                                             "WARNING: error on reading file: %s",l),r(void 0)};e.on("error",o),i.on("data",s                                                                                                                                                                                                                                             ).on("end",a).on("error",o)};var SR=Vt.exports.parseLine=function(t){if(t.length                                                                                                                                                                                                                                             <11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,i=0,s=0,a={},o=!1,l=func                                                                                                                                                                                                                                             tion(u,p,d){var m=t.substring(p,d);Object.hasOwnProperty.call(process.env,"PGPAS                                                                                                                                                                                                                                             S_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),a[Dn[u]]=m},c=0;c<t.length-1;c                                                                                                                                                                                                                                             +=1){if(e=t.charAt(c+1),r=t.charAt(c),o=n==zf-1,o){l(n,i);break}c>=0&&e==":"&&r!                                                                                                                                                                                                                                             =="\\"&&(l(n,i,c+1),i=c+2,n+=1)}return a=Object.keys(a).length===zf?a:null,a},TR                                                                                                                                                                                                                                             =Vt.exports.isValidEntry=function(t){for(var e={0:function(a){return a.length>0}                                                                                                                                                                                                                                             ,1:function(a){return a==="*"?!0:(a=Number(a),isFinite(a)&&a>0&&a<90071992547409                                                                                                                                                                                                                                             92&&Math.floor(a)===a)},2:function(a){return a.length>0},3:function(a){return a.                                                                                                                                                                                                                                             length>0},4:function(a){return a.length>0}},r=0;r<Dn.length;r+=1){var n=e[r],i=t                                                                                                                                                                                                                                             [Dn[r]]||"",s=n(i);if(!s)return!1}return!0}});var E_=x((kz,Gf)=>{"use strict";va                                                                                                                                                                                                                                             r Az=require("path"),P_=require("fs"),Ro=T_();Gf.exports=function(t,e){var r=Ro.                                                                                                                                                                                                                                             getFileName();P_.stat(r,function(n,i){if(n||!Ro.usePgPass(i,r))return e(void 0);                                                                                                                                                                                                                                             var s=P_.createReadStream(r);Ro.getPassword(t,s,e)})};Gf.exports.warnTo=Ro.warnT                                                                                                                                                                                                                                             o});var I_=x((Oz,O_)=>{"use strict";var PR=require("events").EventEmitter,C_=Rn(                                                                                                                                                                                                                                             ),No=require("util"),Qf=Hw(),ER=To(),CR=df(),k_=s_(),AR=ps(),kR=Bf(),OR=cf(),A_=                                                                                                                                                                                                                                             No.deprecate(()=>{},"Client.activeQuery is deprecated and will be removed in a f                                                                                                                                                                                                                                             uture version."),IR=No.deprecate(()=>{},"Client.queryQueue is deprecated and wil                                                                                                                                                                                                                                             l be removed in a future version."),RR=No.deprecate(()=>{},"pgpass support is de                                                                                                                                                                                                                                             precated and will be removed in a future version. You can provide an async funct                                                                                                                                                                                                                                             ion as the password property to the Client/Pool constructor that returns a passw                                                                                                                                                                                                                                             ord instead. Within this funciton you can call the pgpass module in your own cod                                                                                                                                                                                                                                             e."),qR=No.deprecate(()=>{},"Passing a custom Promise implementation to the Clie                                                                                                                                                                                                                                             nt/Pool constructor is deprecated and will be removed in a future version."),qo=                                                                                                                                                                                                                                             class extends PR{constructor(e){super(),this.connectionParameters=new CR(e),this                                                                                                                                                                                                                                             .user=this.connectionParameters.user,this.database=this.connectionParameters.dat                                                                                                                                                                                                                                             abase,this.port=this.connectionParameters.port,this.host=this.connectionParamete                                                                                                                                                                                                                                             rs.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,wri                                                                                                                                                                                                                                             table:!0,value:this.connectionParameters.password}),this.replication=this.connec                                                                                                                                                                                                                                             tionParameters.replication;let r=e||{};r.Promise&&qR(),this._Promise=r.Promise||                                                                                                                                                                                                                                             global.Promise,this._types=new ER(r.types),this._ending=!1,this._ended=!1,this._                                                                                                                                                                                                                                             connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,thi                                                                                                                                                                                                                                             s._activeQuery=null,this.enableChannelBinding=!!r.enableChannelBinding,this.conn                                                                                                                                                                                                                                             ection=r.connection||new kR({stream:r.stream,ssl:this.connectionParameters.ssl,k                                                                                                                                                                                                                                             eepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMill                                                                                                                                                                                                                                             is||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this._queryQu                                                                                                                                                                                                                                             eue=[],this.binary=r.binary||AR.binary,this.processID=null,this.secretKey=null,t                                                                                                                                                                                                                                             his.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineP                                                                                                                                                                                                                                             roperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connecti                                                                                                                                                                                                                                             onTimeoutMillis||0}get activeQuery(){return A_(),this._activeQuery}set activeQue                                                                                                                                                                                                                                             ry(e){A_(),this._activeQuery=e}_getActiveQuery(){return this._activeQuery}_error                                                                                                                                                                                                                                             AllQueries(e){let r=i=>{process.nextTick(()=>{i.handleError(e,this.connection)})                                                                                                                                                                                                                                             },n=this._getActiveQuery();n&&(r(n),this._activeQuery=null),this._queryQueue.for                                                                                                                                                                                                                                             Each(r),this._queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(th                                                                                                                                                                                                                                             is._connectionCallback=e,this._connecting||this._connected){let i=new Error("Cli                                                                                                                                                                                                                                             ent has already been connected. You cannot reuse a client.");process.nextTick(()                                                                                                                                                                                                                                             =>{e(i)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.conn                                                                                                                                                                                                                                             ectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("tim                                                                                                                                                                                                                                             eout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unr                                                                                                                                                                                                                                             ef&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?                                                                                                                                                                                                                                             n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on(                                                                                                                                                                                                                                             "connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("                                                                                                                                                                                                                                             sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),                                                                                                                                                                                                                                             n.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Erro                                                                                                                                                                                                                                             r("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandl                                                                                                                                                                                                                                             e),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!thi                                                                                                                                                                                                                                             s._connectionError?this._connectionCallback?this._connectionCallback(i):this._ha                                                                                                                                                                                                                                             ndleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.next                                                                                                                                                                                                                                             Tick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return n                                                                                                                                                                                                                                             ew this._Promise((r,n)=>{this._connect(i=>{i?n(i):r()})})}_attachListeners(e){e.                                                                                                                                                                                                                                             on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this                                                                                                                                                                                                                                             )),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on                                                                                                                                                                                                                                             ("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLC                                                                                                                                                                                                                                             ontinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal"                                                                                                                                                                                                                                             ,this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackend                                                                                                                                                                                                                                             KeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorM                                                                                                                                                                                                                                             essage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleRe                                                                                                                                                                                                                                             adyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDe                                                                                                                                                                                                                                             scription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDat                                                                                                                                                                                                                                             aRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),                                                                                                                                                                                                                                             e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this                                                                                                                                                                                                                                             ._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComple                                                                                                                                                                                                                                             te.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on                                                                                                                                                                                                                                             ("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNot                                                                                                                                                                                                                                             ification.bind(this))}_getPassword(e){let r=this.connection;if(typeof this.passw                                                                                                                                                                                                                                             ord=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!                                                                                                                                                                                                                                             ==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be                                                                                                                                                                                                                                              a string"));return}this.connectionParameters.password=this.password=n}else this.                                                                                                                                                                                                                                             connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",                                                                                                                                                                                                                                             n)});else if(this.password!==null)e();else try{E_()(this.connectionParameters,i=                                                                                                                                                                                                                                             >{i!==void 0&&(RR(),this.connectionParameters.password=this.password=i),e()})}ca                                                                                                                                                                                                                                             tch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._getPassword((                                                                                                                                                                                                                                             )=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._ge                                                                                                                                                                                                                                             tPassword(async()=>{try{let r=await OR.postgresMd5PasswordHash(this.user,this.pa                                                                                                                                                                                                                                             ssword,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_han                                                                                                                                                                                                                                             dleAuthSASL(e){this._getPassword(()=>{try{this.saslSession=Qf.startSession(e.mec                                                                                                                                                                                                                                             hanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendS                                                                                                                                                                                                                                             ASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}                                                                                                                                                                                                                                             catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try                                                                                                                                                                                                                                             {await Qf.continueSession(this.saslSession,this.password,e.data,this.enableChann                                                                                                                                                                                                                                             elBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(t                                                                                                                                                                                                                                             his.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthS                                                                                                                                                                                                                                             ASLFinal(e){try{Qf.finalizeSession(this.saslSession,e.data),this.saslSession=nul                                                                                                                                                                                                                                             l}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.proces                                                                                                                                                                                                                                             sID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connect                                                                                                                                                                                                                                             ing&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeout                                                                                                                                                                                                                                             Handle),this._connectionCallback&&(this._connectionCallback(null,this),this._con                                                                                                                                                                                                                                             nectionCallback=null),this.emit("connect"));let r=this._getActiveQuery();this._a                                                                                                                                                                                                                                             ctiveQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),                                                                                                                                                                                                                                             this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError                                                                                                                                                                                                                                             ){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._c                                                                                                                                                                                                                                             onnectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_hand                                                                                                                                                                                                                                             leErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);t                                                                                                                                                                                                                                             his._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMess                                                                                                                                                                                                                                             age(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this                                                                                                                                                                                                                                             ._getActiveQuery();if(!r){this._handleErrorEvent(e);return}this._activeQuery=nul                                                                                                                                                                                                                                             l,r.handleError(e,this.connection)}_handleRowDescription(e){this._getActiveQuery                                                                                                                                                                                                                                             ().handleRowDescription(e)}_handleDataRow(e){this._getActiveQuery().handleDataRo                                                                                                                                                                                                                                             w(e)}_handlePortalSuspended(e){this._getActiveQuery().handlePortalSuspended(this                                                                                                                                                                                                                                             .connection)}_handleEmptyQuery(e){this._getActiveQuery().handleEmptyQuery(this.c                                                                                                                                                                                                                                             onnection)}_handleCommandComplete(e){let r=this._getActiveQuery();if(r==null){le                                                                                                                                                                                                                                             t n=new Error("Received unexpected commandComplete message from backend.");this.                                                                                                                                                                                                                                             _handleErrorEvent(n);return}r.handleCommandComplete(e,this.connection)}_handlePa                                                                                                                                                                                                                                             rseComplete(){let e=this._getActiveQuery();if(e==null){let r=new Error("Received                                                                                                                                                                                                                                              unexpected parseComplete message from backend.");this._handleErrorEvent(r);retu                                                                                                                                                                                                                                             rn}e.name&&(this.connection.parsedStatements[e.name]=e.text)}_handleCopyInRespon                                                                                                                                                                                                                                             se(e){this._getActiveQuery().handleCopyInResponse(this.connection)}_handleCopyDa                                                                                                                                                                                                                                             ta(e){this._getActiveQuery().handleCopyData(e,this.connection)}_handleNotificati                                                                                                                                                                                                                                             on(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStar                                                                                                                                                                                                                                             tupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=                                                                                                                                                                                                                                             e.application_name||e.fallback_application_name;return n&&(r.application_name=n)                                                                                                                                                                                                                                             ,e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.stateme                                                                                                                                                                                                                                             nt_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_tim                                                                                                                                                                                                                                             eout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&                                                                                                                                                                                                                                             &(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_se                                                                                                                                                                                                                                             ssion_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQu                                                                                                                                                                                                                                             ery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(t                                                                                                                                                                                                                                             his.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",f                                                                                                                                                                                                                                             unction(){n.cancel(e.processID,e.secretKey)})}else e._queryQueue.indexOf(r)!==-1                                                                                                                                                                                                                                             &&e._queryQueue.splice(e._queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return t                                                                                                                                                                                                                                             his._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypePar                                                                                                                                                                                                                                             ser(e,r)}escapeIdentifier(e){return C_.escapeIdentifier(e)}escapeLiteral(e){retu                                                                                                                                                                                                                                             rn C_.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0){this._acti                                                                                                                                                                                                                                             veQuery=this._queryQueue.shift();let e=this._getActiveQuery();if(e){this.readyFo                                                                                                                                                                                                                                             rQuery=!1,this.hasExecuted=!0;let r=e.submit(this.connection);r&&process.nextTic                                                                                                                                                                                                                                             k(()=>{e.handleError(r,this.connection),this.readyForQuery=!0,this._pulseQueryQu                                                                                                                                                                                                                                             eue()})}else this.hasExecuted&&(this._activeQuery=null,this.emit("drain"))}}quer                                                                                                                                                                                                                                             y(e,r,n){let i,s,a,o,l;if(e==null)throw new TypeError("Client was passed a null                                                                                                                                                                                                                                              or undefined query");return typeof e.submit=="function"?(a=e.query_timeout||this                                                                                                                                                                                                                                             .connectionParameters.query_timeout,s=i=e,typeof r=="function"&&(i.callback=i.ca                                                                                                                                                                                                                                             llback||r)):(a=e.query_timeout||this.connectionParameters.query_timeout,i=new k_                                                                                                                                                                                                                                             (e,r,n),i.callback||(s=new this._Promise((c,u)=>{i.callback=(p,d)=>p?u(p):c(d)})                                                                                                                                                                                                                                             .catch(c=>{throw Error.captureStackTrace(c),c}))),a&&(l=i.callback,o=setTimeout(                                                                                                                                                                                                                                             ()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c                                                                                                                                                                                                                                             ,this.connection)}),l(c),i.callback=()=>{};let u=this._queryQueue.indexOf(i);u>-                                                                                                                                                                                                                                             1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},a),i.callback=(c,u)=>{c                                                                                                                                                                                                                                             learTimeout(o),l(c,u)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._res                                                                                                                                                                                                                                             ult._types&&(i._result._types=this._types),this._queryable?this._ending?(process                                                                                                                                                                                                                                             .nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable")                                                                                                                                                                                                                                             ,this.connection)}),s):(this._queryQueue.push(i),this._pulseQueryQueue(),s):(pro                                                                                                                                                                                                                                             cess.nextTick(()=>{i.handleError(new Error("Client has encountered a connection                                                                                                                                                                                                                                              error and is not queryable"),this.connection)}),s)}ref(){this.connection.ref()}u                                                                                                                                                                                                                                             nref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._conne                                                                                                                                                                                                                                             cting||this._ended)if(e)e();else return this._Promise.resolve();if(this._getActi                                                                                                                                                                                                                                             veQuery()||!this._queryable?this.connection.stream.destroy():this.connection.end                                                                                                                                                                                                                                             (),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connec                                                                                                                                                                                                                                             tion.once("end",r)})}get queryQueue(){return IR(),this._queryQueue}};qo.Query=k_                                                                                                                                                                                                                                             ;O_.exports=qo});var j_=x((Iz,N_)=>{"use strict";var NR=require("events").EventE                                                                                                                                                                                                                                             mitter,R_=function(){},q_=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.sp                                                                                                                                                                                                                                             lice(r,1)[0]},Hf=class{constructor(e,r,n){this.client=e,this.idleListener=r,this                                                                                                                                                                                                                                             .timeoutId=n}},Fn=class{constructor(e){this.callback=e}};function jR(){throw new                                                                                                                                                                                                                                              Error("Release called on client which has already been released to the pool.")}                                                                                                                                                                                                                                             function jo(t,e){if(e)return{callback:e,result:void 0};let r,n,i=function(a,o){a                                                                                                                                                                                                                                             ?r(a):n(o)},s=new t(function(a,o){n=a,r=o}).catch(a=>{throw Error.captureStackTr                                                                                                                                                                                                                                             ace(a),a});return{callback:i,result:s}}function MR(t,e){return function r(n){n.c                                                                                                                                                                                                                                             lient=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client e                                                                                                                                                                                                                                             rror after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}va                                                                                                                                                                                                                                             r Vf=class extends NR{constructor(e,r){super(),this.options=Object.assign({},e),                                                                                                                                                                                                                                             e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configur                                                                                                                                                                                                                                             able:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&                                                                                                                                                                                                                                             Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=t                                                                                                                                                                                                                                             his.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,                                                                                                                                                                                                                                             this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this                                                                                                                                                                                                                                             .options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLif                                                                                                                                                                                                                                             etimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options                                                                                                                                                                                                                                             .Client||r||Kf().Client,this.Promise=this.options.Promise||global.Promise,typeof                                                                                                                                                                                                                                              this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._                                                                                                                                                                                                                                             clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._e                                                                                                                                                                                                                                             ndCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.le                                                                                                                                                                                                                                             ngth>=this.options.max}_isAboveMin(){return this._clients.length>this.options.mi                                                                                                                                                                                                                                             n}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue end                                                                                                                                                                                                                                             ed");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&                                                                                                                                                                                                                                             &this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this                                                                                                                                                                                                                                             .ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("n                                                                                                                                                                                                                                             o queued requests");return}if(!this._idle.length&&this._isFull())return;let e=th                                                                                                                                                                                                                                             is._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeo                                                                                                                                                                                                                                             ut(r.timeoutId);let n=r.client;n.ref&&n.ref();let i=r.idleListener;return this._                                                                                                                                                                                                                                             acquireClient(n,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Er                                                                                                                                                                                                                                             ror("unexpected condition")}_remove(e,r){let n=q_(this._idle,s=>s.client===e);n!                                                                                                                                                                                                                                             ==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(s=>s!==e)                                                                                                                                                                                                                                             ;let i=this;e.end(()=>{i.emit("remove",e),typeof r=="function"&&r()})}connect(e)                                                                                                                                                                                                                                             {if(this.ending){let i=new Error("Cannot use a pool after calling end on the poo                                                                                                                                                                                                                                             l");return e?e(i):this.Promise.reject(i)}let r=jo(this.Promise,e),n=r.result;if(                                                                                                                                                                                                                                             this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>th                                                                                                                                                                                                                                             is._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueu                                                                                                                                                                                                                                             e.push(new Fn(r.callback)),n;let i=(o,l,c)=>{clearTimeout(a),r.callback(o,l,c)},                                                                                                                                                                                                                                             s=new Fn(i),a=setTimeout(()=>{q_(this._pendingQueue,o=>o.callback===i),s.timedOu                                                                                                                                                                                                                                             t=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.opti                                                                                                                                                                                                                                             ons.connectionTimeoutMillis);return a.unref&&a.unref(),this._pendingQueue.push(s                                                                                                                                                                                                                                             ),n}return this.newClient(new Fn(r.callback)),n}newClient(e){let r=new this.Clie                                                                                                                                                                                                                                             nt(this.options);this._clients.push(r);let n=MR(this,r);this.log("checking clien                                                                                                                                                                                                                                             t timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{                                                                                                                                                                                                                                             this.log("ending client due to timeout"),s=!0,r.connection?r.connection.stream.d                                                                                                                                                                                                                                             estroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting ne                                                                                                                                                                                                                                             w client"),r.connect(a=>{if(i&&clearTimeout(i),r.on("error",n),a)this.log("clien                                                                                                                                                                                                                                             t failed to connect",a),this._clients=this._clients.filter(o=>o!==r),s&&(a=new E                                                                                                                                                                                                                                             rror("Connection terminated due to connection timeout",{cause:a})),this._pulseQu                                                                                                                                                                                                                                             eue(),e.timedOut||e.callback(a,void 0,R_);else{if(this.log("new client connected                                                                                                                                                                                                                                             "),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending c                                                                                                                                                                                                                                             lient due to expired lifetime"),this._expired.add(r),this._idle.findIndex(c=>c.c                                                                                                                                                                                                                                             lient===r)!==-1&&this._acquireClient(r,new Fn((c,u,p)=>p()),n,!1)},this.options.                                                                                                                                                                                                                                             maxLifetimeSeconds*1e3);o.unref(),r.once("end",()=>clearTimeout(o))}return this.                                                                                                                                                                                                                                             _acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,i){i&&this.emit("connect",e),th                                                                                                                                                                                                                                             is.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n                                                                                                                                                                                                                                             ),r.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release()                                                                                                                                                                                                                                             :i&&this.options.verify?this.options.verify(e,s=>{if(s)return e.release(s),r.cal                                                                                                                                                                                                                                             lback(s,void 0,R_);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.releas                                                                                                                                                                                                                                             e)}_releaseOnce(e,r){let n=!1;return i=>{n&&jR(),n=!0,this._release(e,r,i)}}_rel                                                                                                                                                                                                                                             ease(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit(                                                                                                                                                                                                                                             "release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.o                                                                                                                                                                                                                                             ptions.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove ex                                                                                                                                                                                                                                             pended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has                                                                                                                                                                                                                                             (e))return this.log("remove expired client"),this._expired.delete(e),this._remov                                                                                                                                                                                                                                             e(e,this._pulseQueue.bind(this));let s;this.options.idleTimeoutMillis&&this._isA                                                                                                                                                                                                                                             boveMin()&&(s=setTimeout(()=>{this._isAboveMin()&&(this.log("remove idle client"                                                                                                                                                                                                                                             ),this._remove(e,this._pulseQueue.bind(this)))},this.options.idleTimeoutMillis),                                                                                                                                                                                                                                             this.options.allowExitOnIdle&&s.unref()),this.options.allowExitOnIdle&&e.unref()                                                                                                                                                                                                                                             ,this._idle.push(new Hf(e,r,s)),this._pulseQueue()}query(e,r,n){if(typeof e=="fu                                                                                                                                                                                                                                             nction"){let s=jo(this.Promise,e);return setImmediate(function(){return s.callba                                                                                                                                                                                                                                             ck(new Error("Passing a function as the first parameter to pool.query is not sup                                                                                                                                                                                                                                             ported"))}),s.result}typeof r=="function"&&(n=r,r=void 0);let i=jo(this.Promise,                                                                                                                                                                                                                                             n);return n=i.callback,this.connect((s,a)=>{if(s)return n(s);let o=!1,l=c=>{o||(                                                                                                                                                                                                                                             o=!0,a.release(c),n(c))};a.once("error",l),this.log("dispatching query");try{a.q                                                                                                                                                                                                                                             uery(e,r,(c,u)=>{if(this.log("query dispatched"),a.removeListener("error",l),!o)                                                                                                                                                                                                                                             return o=!0,a.release(c),c?n(c):n(void 0,u)})}catch(c){return a.release(c),n(c)}                                                                                                                                                                                                                                             }),i.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called en                                                                                                                                                                                                                                             d on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;l                                                                                                                                                                                                                                             et r=jo(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r                                                                                                                                                                                                                                             .result}get waitingCount(){return this._pendingQueue.length}get idleCount(){retu                                                                                                                                                                                                                                             rn this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(th                                                                                                                                                                                                                                             is._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};N_.exp                                                                                                                                                                                                                                             orts=Vf});var F_=x((Rz,D_)=>{"use strict";var M_=require("events").EventEmitter,                                                                                                                                                                                                                                             DR=require("util"),Wf=Rn(),Ln=D_.exports=function(t,e,r){M_.call(this),t=Wf.norm                                                                                                                                                                                                                                             alizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,t                                                                                                                                                                                                                                             his.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayM                                                                                                                                                                                                                                             ode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n)                                                                                                                                                                                                                                             {n==="row"&&(this._emitRowEvents=!0)}.bind(this))};DR.inherits(Ln,M_);var FR={sq                                                                                                                                                                                                                                             lState:"code",statementPosition:"position",messagePrimary:"message",context:"whe                                                                                                                                                                                                                                             re",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"data                                                                                                                                                                                                                                             Type",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunc                                                                                                                                                                                                                                             tion:"routine"};Ln.prototype.handleError=function(t){let e=this.native.pq.result                                                                                                                                                                                                                                             ErrorFields();if(e)for(let r in e){let n=FR[r]||r;t[n]=e[r]}this.callback?this.c                                                                                                                                                                                                                                             allback(t):this.emit("error",t),this.state="error"};Ln.prototype.then=function(t                                                                                                                                                                                                                                             ,e){return this._getPromise().then(t,e)};Ln.prototype.catch=function(t){return t                                                                                                                                                                                                                                             his._getPromise().catch(t)};Ln.prototype._getPromise=function(){return this._pro                                                                                                                                                                                                                                             mise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),                                                                                                                                                                                                                                             this._once("error",e)}.bind(this)),this._promise)};Ln.prototype.submit=function(                                                                                                                                                                                                                                             t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this.                                                                                                                                                                                                                                             _arrayMode;let r=function(n,i,s){if(t.native.arrayMode=!1,setImmediate(function(                                                                                                                                                                                                                                             ){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(s.length>1?i.fo                                                                                                                                                                                                                                             rEach((a,o)=>{a.forEach(l=>{e.emit("row",l,s[o])})}):i.forEach(function(a){e.emi                                                                                                                                                                                                                                             t("row",a,s)})),e.state="end",e.emit("end",s),e.callback&&e.callback(null,s)};if                                                                                                                                                                                                                                             (process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(con                                                                                                                                                                                                                                             sole.error("Warning! Postgres only supports 63 characters for query names."),con                                                                                                                                                                                                                                             sole.error("You supplied %s (%s)",this.name,this.name.length),console.error("Thi                                                                                                                                                                                                                                             s can cause conflicts and silent errors executing queries"));let n=(this.values|                                                                                                                                                                                                                                             |[]).map(Wf.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQue                                                                                                                                                                                                                                             ries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique                                                                                                                                                                                                                                              - '${this.name}' was used for a different statement`);return r(i)}return t.nati                                                                                                                                                                                                                                             ve.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,f                                                                                                                                                                                                                                             unction(i){return i?r(i):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,                                                                                                                                                                                                                                             n,r))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Qu                                                                                                                                                                                                                                             ery values must be an array");return r(i)}let n=this.values.map(Wf.prepareValue)                                                                                                                                                                                                                                             ;t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(t                                                                                                                                                                                                                                             his.text,[],r):t.native.query(this.text,r)}});var U_=x((qz,z_)=>{"use strict";va                                                                                                                                                                                                                                             r L_;try{L_=require("pg-native")}catch(t){throw t}var LR=To(),$_=require("events                                                                                                                                                                                                                                             ").EventEmitter,$R=require("util"),BR=df(),B_=F_(),Qe=z_.exports=function(t){$_.                                                                                                                                                                                                                                             call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new LR(t.                                                                                                                                                                                                                                             types),this.native=new L_({types:this._types}),this._queryQueue=[],this._ending=                                                                                                                                                                                                                                             !1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connecti                                                                                                                                                                                                                                             onParameters=new BR(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nat                                                                                                                                                                                                                                             iveConnectionString),this.user=e.user,Object.defineProperty(this,"password",{con                                                                                                                                                                                                                                             figurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.databa                                                                                                                                                                                                                                             se,this.host=e.host,this.port=e.port,this.namedQueries={}};Qe.Query=B_;$R.inheri                                                                                                                                                                                                                                             ts(Qe,$_);Qe.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick((                                                                                                                                                                                                                                             )=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._ac                                                                                                                                                                                                                                             tiveQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.                                                                                                                                                                                                                                             length=0};Qe.prototype._connect=function(t){let e=this;if(this._connecting){proc                                                                                                                                                                                                                                             ess.nextTick(()=>t(new Error("Client has already been connected. You cannot reus                                                                                                                                                                                                                                             e a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqCon                                                                                                                                                                                                                                             nectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n                                                                                                                                                                                                                                             =e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n                                                                                                                                                                                                                                             ,function(i){if(i)return e.native.end(),t(i);e._connected=!0,e.native.on("error"                                                                                                                                                                                                                                             ,function(s){e._queryable=!1,e._errorAllQueries(s),e.emit("error",s)}),e.native.                                                                                                                                                                                                                                             on("notification",function(s){e.emit("notification",{channel:s.relname,payload:s                                                                                                                                                                                                                                             .extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};Qe.prototype.connec                                                                                                                                                                                                                                             t=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{thi                                                                                                                                                                                                                                             s._connect(n=>{n?r(n):e()})})};Qe.prototype.query=function(t,e,r){let n,i,s,a,o;                                                                                                                                                                                                                                             if(t==null)throw new TypeError("Client was passed a null or undefined query");if                                                                                                                                                                                                                                             (typeof t.submit=="function")s=t.query_timeout||this.connectionParameters.query_                                                                                                                                                                                                                                             timeout,i=n=t,typeof e=="function"&&(t.callback=e);else if(s=t.query_timeout||th                                                                                                                                                                                                                                             is.connectionParameters.query_timeout,n=new B_(t,e,r),!n.callback){let l,c;i=new                                                                                                                                                                                                                                              this._Promise((u,p)=>{l=u,c=p}).catch(u=>{throw Error.captureStackTrace(u),u}),                                                                                                                                                                                                                                             n.callback=(u,p)=>u?c(u):l(p)}return s&&(o=n.callback,a=setTimeout(()=>{let l=ne                                                                                                                                                                                                                                             w Error("Query read timeout");process.nextTick(()=>{n.handleError(l,this.connect                                                                                                                                                                                                                                             ion)}),o(l),n.callback=()=>{};let c=this._queryQueue.indexOf(n);c>-1&&this._quer                                                                                                                                                                                                                                             yQueue.splice(c,1),this._pulseQueryQueue()},s),n.callback=(l,c)=>{clearTimeout(a                                                                                                                                                                                                                                             ),o(l,c)}),this._queryable?this._ending?(n.native=this.native,process.nextTick((                                                                                                                                                                                                                                             )=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(thi                                                                                                                                                                                                                                             s._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.n                                                                                                                                                                                                                                             extTick(()=>{n.handleError(new Error("Client has encountered a connection error                                                                                                                                                                                                                                              and is not queryable"))}),i)};Qe.prototype.end=function(t){let e=this;this._endi                                                                                                                                                                                                                                             ng=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t                                                                                                                                                                                                                                             ||(r=new this._Promise(function(n,i){t=s=>s?i(s):n()})),this.native.end(function                                                                                                                                                                                                                                             (){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{                                                                                                                                                                                                                                             e.emit("end"),t&&t()})}),r};Qe.prototype._hasActiveQuery=function(){return this.                                                                                                                                                                                                                                             _activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"                                                                                                                                                                                                                                             };Qe.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActive                                                                                                                                                                                                                                             Query())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");retur                                                                                                                                                                                                                                             n}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pul                                                                                                                                                                                                                                             seQueryQueue()})};Qe.prototype.cancel=function(t){this._activeQuery===t?this.nat                                                                                                                                                                                                                                             ive.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.spli                                                                                                                                                                                                                                             ce(this._queryQueue.indexOf(t),1)};Qe.prototype.ref=function(){};Qe.prototype.un                                                                                                                                                                                                                                             ref=function(){};Qe.prototype.setTypeParser=function(t,e,r){return this._types.s                                                                                                                                                                                                                                             etTypeParser(t,e,r)};Qe.prototype.getTypeParser=function(t,e){return this._types                                                                                                                                                                                                                                             .getTypeParser(t,e)}});var Xf=x((Nz,G_)=>{"use strict";G_.exports=U_()});var Kf=                                                                                                                                                                                                                                             x((Mz,Mo)=>{"use strict";var zR=I_(),UR=ps(),GR=Bf(),QR=mf(),HR=Rn(),VR=j_(),KR=                                                                                                                                                                                                                                             To(),{DatabaseError:WR}=Ff(),{escapeIdentifier:XR,escapeLiteral:ZR}=Rn(),JR=t=>c                                                                                                                                                                                                                                             lass extends VR{constructor(r){super(r,t)}},Q_=function(t){this.defaults=UR,this                                                                                                                                                                                                                                             .Client=t,this.Query=this.Client.Query,this.Pool=JR(this.Client),this._pools=[],                                                                                                                                                                                                                                             this.Connection=GR,this.types=ls(),this.DatabaseError=WR,this.TypeOverrides=KR,t                                                                                                                                                                                                                                             his.escapeIdentifier=XR,this.escapeLiteral=ZR,this.Result=QR,this.utils=HR},H_=z                                                                                                                                                                                                                                             R,V_=!1;try{V_=!!process.env.NODE_PG_FORCE_NATIVE}catch{}V_&&(H_=Xf());Mo.export                                                                                                                                                                                                                                             s=new Q_(H_);Object.defineProperty(Mo.exports,"native",{configurable:!0,enumerab                                                                                                                                                                                                                                             le:!1,get(){let t=null;try{t=new Q_(Xf())}catch(e){if(e.code!=="MODULE_NOT_FOUND                                                                                                                                                                                                                                             ")throw e}return Object.defineProperty(Mo.exports,"native",{value:t}),t}})});var                                                                                                                                                                                                                                              Hc={};yi(Hc,{capturePaypalOrder:()=>Fj,createPaypalOrder:()=>Dj,getClientToken:                                                                                                                                                                                                                                             ()=>FE,loadPaypalDefault:()=>Lj});async function FE(){let t=Buffer.from(`${$m}:$                                                                                                                                                                                                                                             {Bm}`).toString("base64"),{result:e}=await Mj.requestToken({authorization:`Basic                                                                                                                                                                                                                                              ${t}`},{intent:"sdk_init",response_type:"client_token"});return e.accessToken}a                                                                                                                                                                                                                                             sync function Dj(t,e){try{let{amount:r,currency:n,intent:i}=t.body;if(!r||isNaN(                                                                                                                                                                                                                                             parseFloat(r))||parseFloat(r)<=0)return e.status(400).json({error:"Invalid amoun                                                                                                                                                                                                                                             t. Amount must be a positive number."});if(!n)return e.status(400).json({error:"                                                                                                                                                                                                                                             Invalid currency. Currency is required."});if(!i)return e.status(400).json({erro                                                                                                                                                                                                                                             r:"Invalid intent. Intent is required."});let s={body:{intent:i,purchaseUnits:[{                                                                                                                                                                                                                                             amount:{currencyCode:n,value:r}}]},prefer:"return=minimal"},{body:a,...o}=await                                                                                                                                                                                                                                              DE.createOrder(s),l=JSON.parse(String(a)),c=o.statusCode;e.status(c).json(l)}cat                                                                                                                                                                                                                                             ch(r){console.error("Failed to create order:",r),e.status(500).json({error:"Fail                                                                                                                                                                                                                                             ed to create order."})}}async function Fj(t,e){try{let{orderID:r}=t.params,n={id                                                                                                                                                                                                                                             :r,prefer:"return=minimal"},{body:i,...s}=await DE.captureOrder(n),a=JSON.parse(                                                                                                                                                                                                                                             String(i)),o=s.statusCode;e.status(o).json(a)}catch(r){console.error("Failed to                                                                                                                                                                                                                                              create order:",r),e.status(500).json({error:"Failed to capture order."})}}async                                                                                                                                                                                                                                              function Lj(t,e){let r=await FE();e.json({clientToken:r})}var Mt,$m,Bm,ME,DE,Mj,                                                                                                                                                                                                                                             Vc=JE(()=>{"use strict";Mt=require("@paypal/paypal-server-sdk"),{PAYPAL_CLIENT_I                                                                                                                                                                                                                                             D:$m,PAYPAL_CLIENT_SECRET:Bm}=process.env;if(!$m)throw new Error("Missing PAYPAL                                                                                                                                                                                                                                             _CLIENT_ID");if(!Bm)throw new Error("Missing PAYPAL_CLIENT_SECRET");ME=new Mt.Cl                                                                                                                                                                                                                                             ient({clientCredentialsAuthCredentials:{oAuthClientId:$m,oAuthClientSecret:Bm},t                                                                                                                                                                                                                                             imeout:0,environment:Mt.Environment.Production,logging:{logLevel:Mt.LogLevel.Inf                                                                                                                                                                                                                                             o,logRequest:{logBody:!0},logResponse:{logHeaders:!0}}}),DE=new Mt.OrdersControl                                                                                                                                                                                                                                             ler(ME),Mj=new Mt.OAuthAuthorizationController(ME)});var Qj={};yi(Qj,{log:()=>Gm                                                                                                                                                                                                                                             });module.exports=YE(Qj);var kee=require("dotenv/config"),Ws=ht(cp(),1);var h=Sy                                                                                                                                                                                                                                             mbol.for("drizzle:entityKind"),vF=Symbol.for("drizzle:hasOwnEntityKind");functio                                                                                                                                                                                                                                             n w(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Objec                                                                                                                                                                                                                                             t.prototype.hasOwnProperty.call(e,h))throw new Error(`Class "${e.name??"<unknown                                                                                                                                                                                                                                             >"}" doesn't look like a Drizzle entity. If this is incorrect and the class is p                                                                                                                                                                                                                                             rovided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t                                                                                                                                                                                                                                             ).constructor;if(r)for(;r;){if(h in r&&r[h]===e[h])return!0;r=Object.getPrototyp                                                                                                                                                                                                                                             eOf(r)}return!1}var K=class{constructor(e,r){this.table=e,this.config=r,this.nam                                                                                                                                                                                                                                             e=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.defaul                                                                                                                                                                                                                                             t,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasD                                                                                                                                                                                                                                             efault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniq                                                                                                                                                                                                                                             ueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.c                                                                                                                                                                                                                                             olumnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}                                                                                                                                                                                                                                             static[h]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;h                                                                                                                                                                                                                                             asDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;g                                                                                                                                                                                                                                             enerated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}m                                                                                                                                                                                                                                             apToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!=                                                                                                                                                                                                                                             =void 0&&this.config.generated.type!=="byDefault"}};var no=class{static[h]="Colu                                                                                                                                                                                                                                             mnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNul                                                                                                                                                                                                                                             l:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,un                                                                                                                                                                                                                                             iqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}no                                                                                                                                                                                                                                             tNull(){return this.config.notNull=!0,this}default(e){return this.config.default                                                                                                                                                                                                                                             =e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,t                                                                                                                                                                                                                                             his.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return thi                                                                                                                                                                                                                                             s.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;                                                                                                                                                                                                                                             primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setNam                                                                                                                                                                                                                                             e(e){this.config.name===""&&(this.config.name=e)}};var yt=Symbol.for("drizzle:Na                                                                                                                                                                                                                                             me");var io=class{static[h]="PgForeignKeyBuilder";reference;_onUpdate="no action                                                                                                                                                                                                                                             ";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:n,columns:                                                                                                                                                                                                                                             i,foreignColumns:s}=e();return{name:n,columns:i,foreignTable:s[0].table,foreignC                                                                                                                                                                                                                                             olumns:s}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){                                                                                                                                                                                                                                             return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onD                                                                                                                                                                                                                                             elete=e===void 0?"no action":e,this}build(e){return new up(e,this)}},up=class{co                                                                                                                                                                                                                                             nstructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate                                                                                                                                                                                                                                             ,this.onDelete=r._onDelete}static[h]="PgForeignKey";reference;onUpdate;onDelete;                                                                                                                                                                                                                                             getName(){let{name:e,columns:r,foreignColumns:n}=this.reference(),i=r.map(o=>o.n                                                                                                                                                                                                                                             ame),s=n.map(o=>o.name),a=[this.table[yt],...i,n[0].table[yt],...s];return e??`$                                                                                                                                                                                                                                             {a.join("_")}_fk`}};function so(t,...e){return t(...e)}function dp(t,e){return`$                                                                                                                                                                                                                                             {t[yt]}_${e.join("_")}_unique`}var lp=class{constructor(e,r){this.name=r,this.co                                                                                                                                                                                                                                             lumns=e}static[h]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;                                                                                                                                                                                                                                             nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return ne                                                                                                                                                                                                                                             w pp(e,this.columns,this.nullsNotDistinctConfig,this.name)}},k0=class{static[h]=                                                                                                                                                                                                                                             "PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return ne                                                                                                                                                                                                                                             w lp(e,this.name)}},pp=class{constructor(e,r,n,i){this.table=e,this.columns=r,th                                                                                                                                                                                                                                             is.name=i??dp(this.table,this.columns.map(s=>s.name)),this.nullsNotDistinct=n}st                                                                                                                                                                                                                                             atic[h]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return t                                                                                                                                                                                                                                             his.name}};function O0(t,e,r){for(let n=e;n<t.length;n++){let i=t[n];if(i==="\\"                                                                                                                                                                                                                                             ){n++;continue}if(i==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(i==                                                                                                                                                                                                                                             =","||i==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replac                                                                                                                                                                                                                                             e(/\\/g,""),t.length]}function I0(t,e=0){let r=[],n=e,i=!1;for(;n<t.length;){let                                                                                                                                                                                                                                              s=t[n];if(s===","){(i||n===e)&&r.push(""),i=!0,n++;continue}if(i=!1,s==="\\"){n                                                                                                                                                                                                                                             +=2;continue}if(s==='"'){let[l,c]=O0(t,n+1,!0);r.push(l),n=c;continue}if(s==="}"                                                                                                                                                                                                                                             )return[r,n+1];if(s==="{"){let[l,c]=I0(t,n+1);r.push(l),n=c;continue}let[a,o]=O0                                                                                                                                                                                                                                             (t,n,!1);r.push(a),n=o}return[r,n]}function R0(t){let[e]=I0(t,1);return e}functi                                                                                                                                                                                                                                             on fp(t){return`{${t.map(e=>Array.isArray(e)?fp(e):typeof e=="string"?`"${e.repl                                                                                                                                                                                                                                             ace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var q=class extend                                                                                                                                                                                                                                             s no{foreignKeyConfigs=[];static[h]="PgColumnBuilder";array(e){return new hp(thi                                                                                                                                                                                                                                             s.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref                                                                                                                                                                                                                                             :e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqu                                                                                                                                                                                                                                             eName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.co                                                                                                                                                                                                                                             nfig.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){ret                                                                                                                                                                                                                                             urn this.foreignKeyConfigs.map(({ref:n,actions:i})=>so((s,a)=>{let o=new io(()=>                                                                                                                                                                                                                                             {let l=s();return{columns:[e],foreignColumns:[l]}});return a.onUpdate&&o.onUpdat                                                                                                                                                                                                                                             e(a.onUpdate),a.onDelete&&o.onDelete(a.onDelete),o.build(r)},n,i))}buildExtraCon                                                                                                                                                                                                                                             figColumn(e){return new mp(e,this.config)}},C=class extends K{constructor(e,r){r                                                                                                                                                                                                                                             .uniqueName||(r.uniqueName=dp(e,[r.name])),super(e,r),this.table=e}static[h]="Pg                                                                                                                                                                                                                                             Column"},mp=class extends C{static[h]="ExtraConfigColumn";getSQLType(){return th                                                                                                                                                                                                                                             is.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nu                                                                                                                                                                                                                                             lls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last"                                                                                                                                                                                                                                             ,opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return th                                                                                                                                                                                                                                             is.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="fir                                                                                                                                                                                                                                             st",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this                                                                                                                                                                                                                                             .indexConfig.opClass=e,this}},q0=class{static[h]="IndexedColumn";constructor(e,r                                                                                                                                                                                                                                             ,n,i){this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=i}name;keyAsName                                                                                                                                                                                                                                             ;type;indexConfig},hp=class extends q{static[h]="PgArrayBuilder";constructor(e,r                                                                                                                                                                                                                                             ,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}buil                                                                                                                                                                                                                                             d(e){let r=this.config.baseBuilder.build(e);return new vp(e,this.config,r)}},vp=                                                                                                                                                                                                                                             class t extends C{constructor(e,r,n,i){super(e,r),this.baseColumn=n,this.range=i                                                                                                                                                                                                                                             ,this.size=r.size}size;static[h]="PgArray";getSQLType(){return`${this.baseColumn                                                                                                                                                                                                                                             .getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e                                                                                                                                                                                                                                             ){return typeof e=="string"&&(e=R0(e)),e.map(r=>this.baseColumn.mapFromDriverVal                                                                                                                                                                                                                                             ue(r))}mapToDriverValue(e,r=!1){let n=e.map(i=>i===null?null:w(this.baseColumn,t                                                                                                                                                                                                                                             )?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));re                                                                                                                                                                                                                                             turn r?n:fp(n)}};var N0=Symbol.for("drizzle:isPgEnum");function M0(t){return!!t&                                                                                                                                                                                                                                             &typeof t=="function"&&N0 in t&&t[N0]===!0}var j0=class extends q{static[h]="PgE                                                                                                                                                                                                                                             numColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.                                                                                                                                                                                                                                             enum=r}build(e){return new gp(e,this.config)}},gp=class extends C{static[h]="PgE                                                                                                                                                                                                                                             numColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;construc                                                                                                                                                                                                                                             tor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};va                                                                                                                                                                                                                                             r ge=class{static[h]="Subquery";constructor(e,r,n,i=!1){this._={brand:"Subquery"                                                                                                                                                                                                                                             ,sql:e,selectedFields:r,alias:n,isWith:i}}},Cn=class extends ge{static[h]="WithS                                                                                                                                                                                                                                             ubquery"};var D0="0.39.3";var yp,xp,J={startActiveSpan(t,e){return yp?(xp||(xp=y                                                                                                                                                                                                                                             p.trace.getTracer("drizzle-orm",D0)),so((r,n)=>n.startActiveSpan(t,i=>{try{retur                                                                                                                                                                                                                                             n e(i)}catch(s){throw i.setStatus({code:r.SpanStatusCode.ERROR,message:s instanc                                                                                                                                                                                                                                             eof Error?s.message:"Unknown error"}),s}finally{i.end()}}),yp,xp)):e()}};var Y=S                                                                                                                                                                                                                                             ymbol.for("drizzle:ViewBaseConfig");var ao=Symbol.for("drizzle:Schema"),oo=Symbo                                                                                                                                                                                                                                             l.for("drizzle:Columns"),F0=Symbol.for("drizzle:ExtraConfigColumns"),bp=Symbol.f                                                                                                                                                                                                                                             or("drizzle:OriginalName"),wp=Symbol.for("drizzle:BaseName"),zi=Symbol.for("driz                                                                                                                                                                                                                                             zle:IsAlias"),L0=Symbol.for("drizzle:ExtraConfigBuilder"),$0=Symbol.for("drizzle                                                                                                                                                                                                                                             :IsDrizzleTable"),k=class{static[h]="Table";static Symbol={Name:yt,Schema:ao,Ori                                                                                                                                                                                                                                             ginalName:bp,Columns:oo,ExtraConfigColumns:F0,BaseName:wp,IsAlias:zi,ExtraConfig                                                                                                                                                                                                                                             Builder:L0};[yt];[bp];[ao];[oo];[F0];[wp];[zi]=!1;[$0]=!0;[L0]=void 0;constructo                                                                                                                                                                                                                                             r(e,r,n){this[yt]=this[bp]=e,this[ao]=r,this[wp]=n}};function _p(t){return typeo                                                                                                                                                                                                                                             f t=="object"&&t!==null&&$0 in t}function Be(t){return t[yt]}function qr(t){retu                                                                                                                                                                                                                                             rn`${t[ao]??"public"}.${t[yt]}`}var B0=class{static[h]="FakePrimitiveParam"};fun                                                                                                                                                                                                                                             ction Sp(t){return t!=null&&typeof t.getSQL=="function"}function S9(t){let e={sq                                                                                                                                                                                                                                             l:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings                                                                                                                                                                                                                                             ?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var                                                                                                                                                                                                                                              ye=class{static[h]="StringChunk";value;constructor(e){this.value=Array.isArray(e                                                                                                                                                                                                                                             )?e:[e]}getSQL(){return new R([this])}},R=class t{constructor(e){this.queryChunk                                                                                                                                                                                                                                             s=e}static[h]="SQL";decoder=U0;shouldInlineParams=!1;append(e){return this.query                                                                                                                                                                                                                                             Chunks.push(...e.queryChunks),this}toQuery(e){return J.startActiveSpan("drizzle.                                                                                                                                                                                                                                             buildSQL",r=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return r                                                                                                                                                                                                                                             ?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringif                                                                                                                                                                                                                                             y(n.params)}),n})}buildQueryFromSourceParams(e,r){let n=Object.assign({},r,{inli                                                                                                                                                                                                                                             neParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartInd                                                                                                                                                                                                                                             ex||{value:0}}),{casing:i,escapeName:s,escapeParam:a,prepareTyping:o,inlineParam                                                                                                                                                                                                                                             s:l,paramStartIndex:c}=n;return S9(e.map(u=>{if(w(u,ye))return{sql:u.value.join(                                                                                                                                                                                                                                             ""),params:[]};if(w(u,Ui))return{sql:s(u.value),params:[]};if(u===void 0)return{                                                                                                                                                                                                                                             sql:"",params:[]};if(Array.isArray(u)){let p=[new ye("(")];for(let[d,m]of u.entr                                                                                                                                                                                                                                             ies())p.push(m),d<u.length-1&&p.push(new ye(", "));return p.push(new ye(")")),th                                                                                                                                                                                                                                             is.buildQueryFromSourceParams(p,n)}if(w(u,t))return this.buildQueryFromSourcePar                                                                                                                                                                                                                                             ams(u.queryChunks,{...n,inlineParams:l||u.shouldInlineParams});if(w(u,k)){let p=                                                                                                                                                                                                                                             u[k.Symbol.Schema],d=u[k.Symbol.Name];return{sql:p===void 0||u[zi]?s(d):s(p)+"."                                                                                                                                                                                                                                             +s(d),params:[]}}if(w(u,K)){let p=i.getColumnCasing(u);if(r.invokeSource==="inde                                                                                                                                                                                                                                             xes")return{sql:s(p),params:[]};let d=u.table[k.Symbol.Schema];return{sql:u.tabl                                                                                                                                                                                                                                             e[zi]||d===void 0?s(u.table[k.Symbol.Name])+"."+s(p):s(d)+"."+s(u.table[k.Symbol                                                                                                                                                                                                                                             .Name])+"."+s(p),params:[]}}if(w(u,Fe)){let p=u[Y].schema,d=u[Y].name;return{sql                                                                                                                                                                                                                                             :p===void 0||u[Y].isAlias?s(d):s(p)+"."+s(d),params:[]}}if(w(u,ze)){if(w(u.value                                                                                                                                                                                                                                             ,Gt))return{sql:a(c.value++,u),params:[u],typings:["none"]};let p=u.value===null                                                                                                                                                                                                                                             ?null:u.encoder.mapToDriverValue(u.value);if(w(p,t))return this.buildQueryFromSo                                                                                                                                                                                                                                             urceParams([p],n);if(l)return{sql:this.mapInlineParam(p,n),params:[]};let d=["no                                                                                                                                                                                                                                             ne"];return o&&(d=[o(u.encoder)]),{sql:a(c.value++,p),params:[p],typings:d}}retu                                                                                                                                                                                                                                             rn w(u,Gt)?{sql:a(c.value++,u),params:[u],typings:["none"]}:w(u,t.Aliased)&&u.fi                                                                                                                                                                                                                                             eldAlias!==void 0?{sql:s(u.fieldAlias),params:[]}:w(u,ge)?u._.isWith?{sql:s(u._.                                                                                                                                                                                                                                             alias),params:[]}:this.buildQueryFromSourceParams([new ye("("),u._.sql,new ye(")                                                                                                                                                                                                                                              "),new Ui(u._.alias)],n):M0(u)?u.schema?{sql:s(u.schema)+"."+s(u.enumName),para                                                                                                                                                                                                                                             ms:[]}:{sql:s(u.enumName),params:[]}:Sp(u)?u.shouldOmitSQLParens?.()?this.buildQ                                                                                                                                                                                                                                             ueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new ye("("                                                                                                                                                                                                                                             ),u.getSQL(),new ye(")")],n):l?{sql:this.mapInlineParam(u,n),params:[]}:{sql:a(c                                                                                                                                                                                                                                             .value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){i                                                                                                                                                                                                                                             f(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toSt                                                                                                                                                                                                                                             ring();if(typeof e=="string")return r(e);if(typeof e=="object"){let n=e.toString                                                                                                                                                                                                                                             ();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpect                                                                                                                                                                                                                                             ed param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Ali                                                                                                                                                                                                                                             ased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverV                                                                                                                                                                                                                                             alue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){retur                                                                                                                                                                                                                                             n e?this:void 0}},Ui=class{constructor(e){this.value=e}static[h]="Name";brand;ge                                                                                                                                                                                                                                             tSQL(){return new R([this])}};function z0(t){return typeof t=="object"&&t!==null                                                                                                                                                                                                                                             &&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var U0={mapFromD                                                                                                                                                                                                                                             riverValue:t=>t},G0={mapToDriverValue:t=>t},sL={...U0,...G0},ze=class{constructo                                                                                                                                                                                                                                             r(e,r=G0){this.value=e,this.encoder=r}static[h]="Param";brand;getSQL(){return ne                                                                                                                                                                                                                                             w R([this])}};function g(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r                                                                                                                                                                                                                                             .push(new ye(t[0]));for(let[n,i]of e.entries())r.push(i,new ye(t[n+1]));return n                                                                                                                                                                                                                                             ew R(r)}(t=>{function e(){return new R([])}t.empty=e;function r(l){return new R(                                                                                                                                                                                                                                             l)}t.fromList=r;function n(l){return new R([new ye(l)])}t.raw=n;function i(l,c){                                                                                                                                                                                                                                             let u=[];for(let[p,d]of l.entries())p>0&&c!==void 0&&u.push(c),u.push(d);return                                                                                                                                                                                                                                              new R(u)}t.join=i;function s(l){return new Ui(l)}t.identifier=s;function a(l){re                                                                                                                                                                                                                                             turn new Gt(l)}t.placeholder=a;function o(l,c){return new ze(l,c)}t.param=o})(g|                                                                                                                                                                                                                                             |(g={}));(t=>{class e{constructor(n,i){this.sql=n,this.fieldAlias=i}static[h]="S                                                                                                                                                                                                                                             QL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(th                                                                                                                                                                                                                                             is.sql,this.fieldAlias)}}t.Aliased=e})(R||(R={}));var Gt=class{constructor(e){th                                                                                                                                                                                                                                             is.name=e}static[h]="Placeholder";getSQL(){return new R([this])}};function Tp(t,                                                                                                                                                                                                                                             e){return t.map(r=>{if(w(r,Gt)){if(!(r.name in e))throw new Error(`No value for                                                                                                                                                                                                                                              placeholder "${r.name}" was provided`);return e[r.name]}if(w(r,ze)&&w(r.value,Gt                                                                                                                                                                                                                                             )){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.                                                                                                                                                                                                                                             name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return                                                                                                                                                                                                                                              r})}var Q0=Symbol.for("drizzle:IsDrizzleView"),Fe=class{static[h]="View";[Y];[Q0                                                                                                                                                                                                                                             ]=!0;constructor({name:e,schema:r,selectedFields:n,query:i}){this[Y]={name:e,ori                                                                                                                                                                                                                                             ginalName:e,schema:r,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL()                                                                                                                                                                                                                                             {return new R([this])}};function H0(t){return typeof t=="object"&&t!==null&&Q0 i                                                                                                                                                                                                                                             n t}K.prototype.getSQL=function(){return new R([this])};k.prototype.getSQL=funct                                                                                                                                                                                                                                             ion(){return new R([this])};ge.prototype.getSQL=function(){return new R([this])}                                                                                                                                                                                                                                             ;var Nr=class{constructor(e){this.table=e}static[h]="ColumnAliasProxyHandler";ge                                                                                                                                                                                                                                             t(e,r){return r==="table"?this.table:e[r]}},An=class{constructor(e,r){this.alias                                                                                                                                                                                                                                             =e,this.replaceOriginalName=r}static[h]="TableAliasProxyHandler";get(e,r){if(r==                                                                                                                                                                                                                                             =k.Symbol.IsAlias)return!0;if(r===k.Symbol.Name)return this.alias;if(this.replac                                                                                                                                                                                                                                             eOriginalName&&r===k.Symbol.OriginalName)return this.alias;if(r===Y)return{...e[                                                                                                                                                                                                                                             Y],name:this.alias,isAlias:!0};if(r===k.Symbol.Columns){let i=e[k.Symbol.Columns                                                                                                                                                                                                                                             ];if(!i)return i;let s={};return Object.keys(i).map(a=>{s[a]=new Proxy(i[a],new                                                                                                                                                                                                                                              Nr(new Proxy(e,this)))}),s}let n=e[r];return w(n,K)?new Proxy(n,new Nr(new Proxy                                                                                                                                                                                                                                             (e,this))):n}},V0=class{constructor(e){this.alias=e}static[h]="RelationTableAlia                                                                                                                                                                                                                                             sProxyHandler";get(e,r){return r==="sourceTable"?Gi(e.sourceTable,this.alias):e[                                                                                                                                                                                                                                             r]}};function Gi(t,e){return new Proxy(t,new An(e,!1))}function Ct(t,e){return n                                                                                                                                                                                                                                             ew Proxy(t,new Nr(new Proxy(t.table,new An(e,!1))))}function Pp(t,e){return new                                                                                                                                                                                                                                              R.Aliased(Qi(t.sql,e),t.fieldAlias)}function Qi(t,e){return g.join(t.queryChunks                                                                                                                                                                                                                                             .map(r=>w(r,K)?Ct(r,e):w(r,R)?Qi(r,e):w(r,R.Aliased)?Pp(r,e):r))}var Hi=class ex                                                                                                                                                                                                                                             tends Error{static[h]="DrizzleError";constructor({message:e,cause:r}){super(e),t                                                                                                                                                                                                                                             his.name="DrizzleError",this.cause=r}},co=class extends Hi{static[h]="Transactio                                                                                                                                                                                                                                             nRollbackError";constructor(){super({message:"Rollback"})}};function Ue(t,e){ret                                                                                                                                                                                                                                             urn z0(e)&&!Sp(t)&&!w(t,ze)&&!w(t,Gt)&&!w(t,K)&&!w(t,k)&&!w(t,Fe)?new ze(t,e):t}                                                                                                                                                                                                                                             var at=(t,e)=>g`${t} = ${Ue(e,t)}`,K0=(t,e)=>g`${t} <> ${Ue(e,t)}`;function Vi(.                                                                                                                                                                                                                                             ..t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new R(e):                                                                                                                                                                                                                                             new R([new ye("("),g.join(e,new ye(" and ")),new ye(")")])}function W0(...t){let                                                                                                                                                                                                                                              e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new R(e):new R([n                                                                                                                                                                                                                                             ew ye("("),g.join(e,new ye(" or ")),new ye(")")])}function X0(t){return g`not ${                                                                                                                                                                                                                                             t}`}var Z0=(t,e)=>g`${t} > ${Ue(e,t)}`,J0=(t,e)=>g`${t} >= ${Ue(e,t)}`,Y0=(t,e)=                                                                                                                                                                                                                                             >g`${t} < ${Ue(e,t)}`,e1=(t,e)=>g`${t} <= ${Ue(e,t)}`;function t1(t,e){return Ar                                                                                                                                                                                                                                             ray.isArray(e)?e.length===0?g`false`:g`${t} in ${e.map(r=>Ue(r,t))}`:g`${t} in $                                                                                                                                                                                                                                             {Ue(e,t)}`}function r1(t,e){return Array.isArray(e)?e.length===0?g`true`:g`${t}                                                                                                                                                                                                                                              not in ${e.map(r=>Ue(r,t))}`:g`${t} not in ${Ue(e,t)}`}function n1(t){return g`$                                                                                                                                                                                                                                             {t} is null`}function i1(t){return g`${t} is not null`}function s1(t){return g`e                                                                                                                                                                                                                                             xists ${t}`}function a1(t){return g`not exists ${t}`}function o1(t,e,r){return g                                                                                                                                                                                                                                             `${t} between ${Ue(e,t)} and ${Ue(r,t)}`}function c1(t,e,r){return g`${t} not be                                                                                                                                                                                                                                             tween ${Ue(e,t)} and ${Ue(r,t)}`}function u1(t,e){return g`${t} like ${e}`}funct                                                                                                                                                                                                                                             ion l1(t,e){return g`${t} not like ${e}`}function p1(t,e){return g`${t} ilike ${                                                                                                                                                                                                                                             e}`}function d1(t,e){return g`${t} not ilike ${e}`}function f1(t){return g`${t}                                                                                                                                                                                                                                              asc`}function m1(t){return g`${t} desc`}var Ep=class{static[h]="ConsoleLogWriter                                                                                                                                                                                                                                             ";write(e){console.log(e)}},uo=class{static[h]="DefaultLogger";writer;constructo                                                                                                                                                                                                                                             r(e){this.writer=e?.writer??new Ep}logQuery(e,r){let n=r.map(s=>{try{return JSON                                                                                                                                                                                                                                             .stringify(s)}catch{return String(s)}}),i=n.length?` -- params: [${n.join(", ")}                                                                                                                                                                                                                                             ]`:"";this.writer.write(`Query: ${e}${i}`)}},lo=class{static[h]="NoopLogger";log                                                                                                                                                                                                                                             Query(){}};var Ne=class{static[h]="QueryPromise";[Symbol.toStringTag]="QueryProm                                                                                                                                                                                                                                             ise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r                                                                                                                                                                                                                                             ),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};function h1(t,                                                                                                                                                                                                                                             e,r){let n={},i=t.reduce((s,{path:a,field:o},l)=>{let c;w(o,K)?c=o:w(o,R)?c=o.de                                                                                                                                                                                                                                             coder:c=o.sql.decoder;let u=s;for(let[p,d]of a.entries())if(p<a.length-1)d in u|                                                                                                                                                                                                                                             |(u[d]={}),u=u[d];else{let m=e[l],v=u[d]=m===null?null:c.mapFromDriverValue(m);i                                                                                                                                                                                                                                             f(r&&w(o,K)&&a.length===2){let y=a[0];y in n?typeof n[y]=="string"&&n[y]!==Be(o.                                                                                                                                                                                                                                             table)&&(n[y]=!1):n[y]=v===null?Be(o.table):!1}}return s},{});if(r&&Object.keys(                                                                                                                                                                                                                                             n).length>0)for(let[s,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(i[s]=nu                                                                                                                                                                                                                                             ll);return i}function ot(t,e){return Object.entries(t).reduce((r,[n,i])=>{if(typ                                                                                                                                                                                                                                             eof n!="string")return r;let s=e?[...e,n]:[n];return w(i,K)||w(i,R)||w(i,R.Alias                                                                                                                                                                                                                                             ed)?r.push({path:s,field:i}):w(i,k)?r.push(...ot(i[k.Symbol.Columns],s)):r.push(                                                                                                                                                                                                                                             ...ot(i,s)),r},[])}function Ki(t,e){let r=Object.keys(t),n=Object.keys(e);if(r.l                                                                                                                                                                                                                                             ength!==n.length)return!1;for(let[i,s]of r.entries())if(s!==n[i])return!1;return                                                                                                                                                                                                                                             !0}function po(t,e){let r=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,i                                                                                                                                                                                                                                             ])=>w(i,R)||w(i,K)?[n,i]:[n,new ze(i,t[k.Symbol.Columns][n])]);if(r.length===0)t                                                                                                                                                                                                                                             hrow new Error("No values to set");return Object.fromEntries(r)}function v1(t,e)                                                                                                                                                                                                                                             {for(let r of e)for(let n of Object.getOwnPropertyNames(r.prototype))n!=="constr                                                                                                                                                                                                                                             uctor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.pr                                                                                                                                                                                                                                             ototype,n)||Object.create(null))}function fo(t){return t[k.Symbol.Columns]}funct                                                                                                                                                                                                                                             ion g1(t){return t[Y].selectedFields}function Qt(t){return w(t,ge)?t._.alias:w(t                                                                                                                                                                                                                                             ,Fe)?t[Y].name:w(t,R)?void 0:t[k.Symbol.IsAlias]?t[k.Symbol.Name]:t[k.Symbol.Bas                                                                                                                                                                                                                                             eName]}function V(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:ty                                                                                                                                                                                                                                             peof t=="object"?t:e}}function y1(t){if(typeof t!="object"||t===null||t.construc                                                                                                                                                                                                                                             tor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!==                                                                                                                                                                                                                                             "boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined"                                                                                                                                                                                                                                             )}if("schema"in t){let e=typeof t.logger;return!(e!=="object"&&e!=="undefined")}                                                                                                                                                                                                                                             if("casing"in t){let e=typeof t.logger;return!(e!=="string"&&e!=="undefined")}if                                                                                                                                                                                                                                             ("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0)                                                                                                                                                                                                                                             ;if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="objec                                                                                                                                                                                                                                             t"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"                                                                                                                                                                                                                                             &&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Ht=class                                                                                                                                                                                                                                              extends q{static[h]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e)                                                                                                                                                                                                                                             {let{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,                                                                                                                                                                                                                                             sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return thi                                                                                                                                                                                                                                             s.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(                                                                                                                                                                                                                                             e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequ                                                                                                                                                                                                                                             enceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefaul                                                                                                                                                                                                                                             t"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var Cp=class                                                                                                                                                                                                                                              extends Ht{static[h]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigI                                                                                                                                                                                                                                             nt53")}build(e){return new Ap(e,this.config)}},Ap=class extends C{static[h]="PgB                                                                                                                                                                                                                                             igInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="num                                                                                                                                                                                                                                             ber"?e:Number(e)}},kp=class extends Ht{static[h]="PgBigInt64Builder";constructor                                                                                                                                                                                                                                             (e){super(e,"bigint","PgBigInt64")}build(e){return new Op(e,this.config)}},Op=cl                                                                                                                                                                                                                                             ass extends C{static[h]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverVa                                                                                                                                                                                                                                             lue(e){return BigInt(e)}};function x1(t,e){let{name:r,config:n}=V(t,e);return n.                                                                                                                                                                                                                                             mode==="number"?new Cp(r):new kp(r)}var Ip=class extends q{static[h]="PgBigSeria                                                                                                                                                                                                                                             l53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefa                                                                                                                                                                                                                                             ult=!0,this.config.notNull=!0}build(e){return new Rp(e,this.config)}},Rp=class e                                                                                                                                                                                                                                             xtends C{static[h]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverV                                                                                                                                                                                                                                             alue(e){return typeof e=="number"?e:Number(e)}},qp=class extends q{static[h]="Pg                                                                                                                                                                                                                                             BigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config                                                                                                                                                                                                                                             .hasDefault=!0}build(e){return new Np(e,this.config)}},Np=class extends C{static                                                                                                                                                                                                                                             [h]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return                                                                                                                                                                                                                                              BigInt(e)}};function b1(t,e){let{name:r,config:n}=V(t,e);return n.mode==="number                                                                                                                                                                                                                                             "?new Ip(r):new qp(r)}var jp=class extends q{static[h]="PgBooleanBuilder";constr                                                                                                                                                                                                                                             uctor(e){super(e,"boolean","PgBoolean")}build(e){return new Mp(e,this.config)}},                                                                                                                                                                                                                                             Mp=class extends C{static[h]="PgBoolean";getSQLType(){return"boolean"}};function                                                                                                                                                                                                                                              mo(t){return new jp(t??"")}var Dp=class extends q{static[h]="PgCharBuilder";con                                                                                                                                                                                                                                             structor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config                                                                                                                                                                                                                                             .enumValues=r.enum}build(e){return new Fp(e,this.config)}},Fp=class extends C{st                                                                                                                                                                                                                                             atic[h]="PgChar";length=this.config.length;enumValues=this.config.enumValues;get                                                                                                                                                                                                                                             SQLType(){return this.length===void 0?"char":`char(${this.length})`}};function w                                                                                                                                                                                                                                             1(t,e={}){let{name:r,config:n}=V(t,e);return new Dp(r,n)}var Lp=class extends q{                                                                                                                                                                                                                                             static[h]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){ret                                                                                                                                                                                                                                             urn new $p(e,this.config)}},$p=class extends C{static[h]="PgCidr";getSQLType(){r                                                                                                                                                                                                                                             eturn"cidr"}};function _1(t){return new Lp(t??"")}var Bp=class extends q{static[                                                                                                                                                                                                                                             h]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn")                                                                                                                                                                                                                                             ,this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new zp                                                                                                                                                                                                                                             (e,this.config)}},zp=class extends C{static[h]="PgCustomColumn";sqlName;mapTo;ma                                                                                                                                                                                                                                             pFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fie                                                                                                                                                                                                                                             ldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams                                                                                                                                                                                                                                             .fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof                                                                                                                                                                                                                                              this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof th                                                                                                                                                                                                                                             is.mapTo=="function"?this.mapTo(e):e}};function S1(t){return(e,r)=>{let{name:n,c                                                                                                                                                                                                                                             onfig:i}=V(e,r);return new Bp(n,i,t)}}var At=class extends q{static[h]="PgDateCo                                                                                                                                                                                                                                             lumnBaseBuilder";defaultNow(){return this.default(g`now()`)}};var Up=class exten                                                                                                                                                                                                                                             ds At{static[h]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e)                                                                                                                                                                                                                                             {return new Wi(e,this.config)}},Wi=class extends C{static[h]="PgDate";getSQLType                                                                                                                                                                                                                                             (){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){ret                                                                                                                                                                                                                                             urn e.toISOString()}},Gp=class extends At{static[h]="PgDateStringBuilder";constr                                                                                                                                                                                                                                             uctor(e){super(e,"string","PgDateString")}build(e){return new Xi(e,this.config)}                                                                                                                                                                                                                                             },Xi=class extends C{static[h]="PgDateString";getSQLType(){return"date"}};functi                                                                                                                                                                                                                                             on T1(t,e){let{name:r,config:n}=V(t,e);return n?.mode==="date"?new Up(r):new Gp(                                                                                                                                                                                                                                             r)}var Qp=class extends q{static[h]="PgDoublePrecisionBuilder";constructor(e){su                                                                                                                                                                                                                                             per(e,"number","PgDoublePrecision")}build(e){return new Hp(e,this.config)}},Hp=c                                                                                                                                                                                                                                             lass extends C{static[h]="PgDoublePrecision";getSQLType(){return"double precisio                                                                                                                                                                                                                                             n"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};func                                                                                                                                                                                                                                             tion kn(t){return new Qp(t??"")}var Vp=class extends q{static[h]="PgInetBuilder"                                                                                                                                                                                                                                             ;constructor(e){super(e,"string","PgInet")}build(e){return new Kp(e,this.config)                                                                                                                                                                                                                                             }},Kp=class extends C{static[h]="PgInet";getSQLType(){return"inet"}};function P1                                                                                                                                                                                                                                             (t){return new Vp(t??"")}var Wp=class extends Ht{static[h]="PgIntegerBuilder";co                                                                                                                                                                                                                                             nstructor(e){super(e,"number","PgInteger")}build(e){return new Xp(e,this.config)                                                                                                                                                                                                                                             }},Xp=class extends C{static[h]="PgInteger";getSQLType(){return"integer"}mapFrom                                                                                                                                                                                                                                             DriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function jr(t){r                                                                                                                                                                                                                                             eturn new Wp(t??"")}var Zp=class extends q{static[h]="PgIntervalBuilder";constru                                                                                                                                                                                                                                             ctor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){r                                                                                                                                                                                                                                             eturn new Jp(e,this.config)}},Jp=class extends C{static[h]="PgInterval";fields=t                                                                                                                                                                                                                                             his.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;                                                                                                                                                                                                                                             getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.pr                                                                                                                                                                                                                                             ecision})`:"";return`interval${e}${r}`}};function E1(t,e={}){let{name:r,config:n                                                                                                                                                                                                                                             }=V(t,e);return new Zp(r,n)}var Yp=class extends q{static[h]="PgJsonBuilder";con                                                                                                                                                                                                                                             structor(e){super(e,"json","PgJson")}build(e){return new Zi(e,this.config)}},Zi=                                                                                                                                                                                                                                             class extends C{static[h]="PgJson";constructor(e,r){super(e,r)}getSQLType(){retu                                                                                                                                                                                                                                             rn"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(t                                                                                                                                                                                                                                             ypeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function C1                                                                                                                                                                                                                                             (t){return new Yp(t??"")}var ed=class extends q{static[h]="PgJsonbBuilder";const                                                                                                                                                                                                                                             ructor(e){super(e,"json","PgJsonb")}build(e){return new Ji(e,this.config)}},Ji=c                                                                                                                                                                                                                                             lass extends C{static[h]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){retu                                                                                                                                                                                                                                             rn"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(                                                                                                                                                                                                                                             typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function A                                                                                                                                                                                                                                             1(t){return new ed(t??"")}var td=class extends q{static[h]="PgLineBuilder";const                                                                                                                                                                                                                                             ructor(e){super(e,"array","PgLine")}build(e){return new rd(e,this.config)}},rd=c                                                                                                                                                                                                                                             lass extends C{static[h]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e                                                                                                                                                                                                                                             ){let[r,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFl                                                                                                                                                                                                                                             oat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}                                                                                                                                                                                                                                             }`}},nd=class extends q{static[h]="PgLineABCBuilder";constructor(e){super(e,"jso                                                                                                                                                                                                                                             n","PgLineABC")}build(e){return new id(e,this.config)}},id=class extends C{stati                                                                                                                                                                                                                                             c[h]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,i]=e.sl                                                                                                                                                                                                                                             ice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Numb                                                                                                                                                                                                                                             er.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function                                                                                                                                                                                                                                              k1(t,e){let{name:r,config:n}=V(t,e);return!n?.mode||n.mode==="tuple"?new td(r):n                                                                                                                                                                                                                                             ew nd(r)}var sd=class extends q{static[h]="PgMacaddrBuilder";constructor(e){supe                                                                                                                                                                                                                                             r(e,"string","PgMacaddr")}build(e){return new ad(e,this.config)}},ad=class exten                                                                                                                                                                                                                                             ds C{static[h]="PgMacaddr";getSQLType(){return"macaddr"}};function O1(t){return                                                                                                                                                                                                                                              new sd(t??"")}var od=class extends q{static[h]="PgMacaddr8Builder";constructor(e                                                                                                                                                                                                                                             ){super(e,"string","PgMacaddr8")}build(e){return new cd(e,this.config)}},cd=clas                                                                                                                                                                                                                                             s extends C{static[h]="PgMacaddr8";getSQLType(){return"macaddr8"}};function I1(t                                                                                                                                                                                                                                             ){return new od(t??"")}var ud=class extends q{static[h]="PgNumericBuilder";const                                                                                                                                                                                                                                             ructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.                                                                                                                                                                                                                                             scale=n}build(e){return new Yi(e,this.config)}},Yi=class extends C{static[h]="Pg                                                                                                                                                                                                                                             Numeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,                                                                                                                                                                                                                                             this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==voi                                                                                                                                                                                                                                             d 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric                                                                                                                                                                                                                                             ":`numeric(${this.precision})`}};function R1(t,e){let{name:r,config:n}=V(t,e);re                                                                                                                                                                                                                                             turn new ud(r,n?.precision,n?.scale)}var ld=class extends q{static[h]="PgPointTu                                                                                                                                                                                                                                             pleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new p                                                                                                                                                                                                                                             d(e,this.config)}},pd=class extends C{static[h]="PgPointTuple";getSQLType(){retu                                                                                                                                                                                                                                             rn"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).sp                                                                                                                                                                                                                                             lit(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapTo                                                                                                                                                                                                                                             DriverValue(e){return`(${e[0]},${e[1]})`}},dd=class extends q{static[h]="PgPoint                                                                                                                                                                                                                                             ObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return ne                                                                                                                                                                                                                                             w fd(e,this.config)}},fd=class extends C{static[h]="PgPointObject";getSQLType(){                                                                                                                                                                                                                                             return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1                                                                                                                                                                                                                                             ).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapT                                                                                                                                                                                                                                             oDriverValue(e){return`(${e.x},${e.y})`}};function q1(t,e){let{name:r,config:n}=                                                                                                                                                                                                                                             V(t,e);return!n?.mode||n.mode==="tuple"?new ld(r):new dd(r)}function T9(t){let e                                                                                                                                                                                                                                             =[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));retur                                                                                                                                                                                                                                             n new Uint8Array(e)}function N1(t,e){let r=new ArrayBuffer(8),n=new DataView(r);                                                                                                                                                                                                                                             for(let i=0;i<8;i++)n.setUint8(i,t[e+i]);return n.getFloat64(0,!0)}function md(t                                                                                                                                                                                                                                             ){let e=T9(t),r=0,n=e[r];r+=1;let i=new DataView(e.buffer),s=i.getUint32(r,n===1                                                                                                                                                                                                                                             );r+=4;let a;if(s&536870912&&(a=i.getUint32(r,n===1),r+=4),(s&65535)===1){let o=                                                                                                                                                                                                                                             N1(e,r);r+=8;let l=N1(e,r);return r+=8,[o,l]}throw new Error("Unsupported geomet                                                                                                                                                                                                                                             ry type")}var hd=class extends q{static[h]="PgGeometryBuilder";constructor(e){su                                                                                                                                                                                                                                             per(e,"array","PgGeometry")}build(e){return new vd(e,this.config)}},vd=class ext                                                                                                                                                                                                                                             ends C{static[h]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriver                                                                                                                                                                                                                                             Value(e){return md(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},gd=cl                                                                                                                                                                                                                                             ass extends q{static[h]="PgGeometryObjectBuilder";constructor(e){super(e,"json",                                                                                                                                                                                                                                             "PgGeometryObject")}build(e){return new yd(e,this.config)}},yd=class extends C{s                                                                                                                                                                                                                                             tatic[h]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverVa                                                                                                                                                                                                                                             lue(e){let r=md(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x}                                                                                                                                                                                                                                              ${e.y})`}};function j1(t,e){let{name:r,config:n}=V(t,e);return!n?.mode||n.mode=                                                                                                                                                                                                                                             =="tuple"?new hd(r):new gd(r)}var xd=class extends q{static[h]="PgRealBuilder";c                                                                                                                                                                                                                                             onstructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return                                                                                                                                                                                                                                              new bd(e,this.config)}},bd=class extends C{static[h]="PgReal";constructor(e,r){s                                                                                                                                                                                                                                             uper(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Num                                                                                                                                                                                                                                             ber.parseFloat(e):e};function M1(t){return new xd(t??"")}var wd=class extends q{                                                                                                                                                                                                                                             static[h]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.con                                                                                                                                                                                                                                             fig.hasDefault=!0,this.config.notNull=!0}build(e){return new _d(e,this.config)}}                                                                                                                                                                                                                                             ,_d=class extends C{static[h]="PgSerial";getSQLType(){return"serial"}};function                                                                                                                                                                                                                                              D1(t){return new wd(t??"")}var Sd=class extends Ht{static[h]="PgSmallIntBuilder"                                                                                                                                                                                                                                             ;constructor(e){super(e,"number","PgSmallInt")}build(e){return new Td(e,this.con                                                                                                                                                                                                                                             fig)}},Td=class extends C{static[h]="PgSmallInt";getSQLType(){return"smallint"}m                                                                                                                                                                                                                                             apFromDriverValue=e=>typeof e=="string"?Number(e):e};function F1(t){return new S                                                                                                                                                                                                                                             d(t??"")}var Pd=class extends q{static[h]="PgSmallSerialBuilder";constructor(e){                                                                                                                                                                                                                                             super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=                                                                                                                                                                                                                                             !0}build(e){return new Ed(e,this.config)}},Ed=class extends C{static[h]="PgSmall                                                                                                                                                                                                                                             Serial";getSQLType(){return"smallserial"}};function L1(t){return new Pd(t??"")}v                                                                                                                                                                                                                                             ar Cd=class extends q{static[h]="PgTextBuilder";constructor(e,r){super(e,"string                                                                                                                                                                                                                                             ","PgText"),this.config.enumValues=r.enum}build(e){return new Ad(e,this.config)}                                                                                                                                                                                                                                             },Ad=class extends C{static[h]="PgText";enumValues=this.config.enumValues;getSQL                                                                                                                                                                                                                                             Type(){return"text"}};function ee(t,e={}){let{name:r,config:n}=V(t,e);return new                                                                                                                                                                                                                                              Cd(r,n)}var kd=class extends At{constructor(e,r,n){super(e,"string","PgTime"),t                                                                                                                                                                                                                                             his.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.preci                                                                                                                                                                                                                                             sion=n}static[h]="PgTimeBuilder";build(e){return new es(e,this.config)}},es=clas                                                                                                                                                                                                                                             s extends C{static[h]="PgTime";withTimezone;precision;constructor(e,r){super(e,r                                                                                                                                                                                                                                             ),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){retur                                                                                                                                                                                                                                             n`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" w                                                                                                                                                                                                                                             ith time zone":""}`}};function $1(t,e={}){let{name:r,config:n}=V(t,e);return new                                                                                                                                                                                                                                              kd(r,n.withTimezone??!1,n.precision)}var Od=class extends At{static[h]="PgTimes                                                                                                                                                                                                                                             tampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTi                                                                                                                                                                                                                                             mezone=r,this.config.precision=n}build(e){return new ts(e,this.config)}},ts=clas                                                                                                                                                                                                                                             s extends C{static[h]="PgTimestamp";withTimezone;precision;constructor(e,r){supe                                                                                                                                                                                                                                             r(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){                                                                                                                                                                                                                                             return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withT                                                                                                                                                                                                                                             imezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?                                                                                                                                                                                                                                             e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Id=class extends At{static[h]=                                                                                                                                                                                                                                             "PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampStrin                                                                                                                                                                                                                                             g"),this.config.withTimezone=r,this.config.precision=n}build(e){return new rs(e,                                                                                                                                                                                                                                             this.config)}},rs=class extends C{static[h]="PgTimestampString";withTimezone;pre                                                                                                                                                                                                                                             cision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precisi                                                                                                                                                                                                                                             on=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${thi                                                                                                                                                                                                                                             s.precision})`}${this.withTimezone?" with time zone":""}`}};function ho(t,e={}){                                                                                                                                                                                                                                             let{name:r,config:n}=V(t,e);return n?.mode==="string"?new Id(r,n.withTimezone??!                                                                                                                                                                                                                                             1,n.precision):new Od(r,n?.withTimezone??!1,n?.precision)}var Rd=class extends q                                                                                                                                                                                                                                             {static[h]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRand                                                                                                                                                                                                                                             om(){return this.default(g`gen_random_uuid()`)}build(e){return new ns(e,this.con                                                                                                                                                                                                                                             fig)}},ns=class extends C{static[h]="PgUUID";getSQLType(){return"uuid"}};functio                                                                                                                                                                                                                                             n B1(t){return new Rd(t??"")}var qd=class extends q{static[h]="PgVarcharBuilder"                                                                                                                                                                                                                                             ;constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this                                                                                                                                                                                                                                             .config.enumValues=r.enum}build(e){return new Nd(e,this.config)}},Nd=class exten                                                                                                                                                                                                                                             ds C{static[h]="PgVarchar";length=this.config.length;enumValues=this.config.enum                                                                                                                                                                                                                                             Values;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length                                                                                                                                                                                                                                             })`}};function z1(t,e={}){let{name:r,config:n}=V(t,e);return new qd(r,n)}var jd=                                                                                                                                                                                                                                             class extends q{static[h]="PgBinaryVectorBuilder";constructor(e,r){super(e,"stri                                                                                                                                                                                                                                             ng","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Md                                                                                                                                                                                                                                             (e,this.config)}},Md=class extends C{static[h]="PgBinaryVector";dimensions=this.                                                                                                                                                                                                                                             config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function U1(t,e                                                                                                                                                                                                                                             ){let{name:r,config:n}=V(t,e);return new jd(r,n)}var Dd=class extends q{static[h                                                                                                                                                                                                                                             ]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.co                                                                                                                                                                                                                                             nfig.dimensions=r.dimensions}build(e){return new Fd(e,this.config)}},Fd=class ex                                                                                                                                                                                                                                             tends C{static[h]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){                                                                                                                                                                                                                                             return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)                                                                                                                                                                                                                                             }mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(                                                                                                                                                                                                                                             r))}};function G1(t,e){let{name:r,config:n}=V(t,e);return new Dd(r,n)}var Ld=cla                                                                                                                                                                                                                                             ss extends q{static[h]="PgSparseVectorBuilder";constructor(e,r){super(e,"string"                                                                                                                                                                                                                                             ,"PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new $d(e,                                                                                                                                                                                                                                             this.config)}},$d=class extends C{static[h]="PgSparseVector";dimensions=this.con                                                                                                                                                                                                                                             fig.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function Q1(                                                                                                                                                                                                                                             t,e){let{name:r,config:n}=V(t,e);return new Ld(r,n)}var Bd=class extends q{stati                                                                                                                                                                                                                                             c[h]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.                                                                                                                                                                                                                                             dimensions=r.dimensions}build(e){return new zd(e,this.config)}},zd=class extends                                                                                                                                                                                                                                              C{static[h]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`ve                                                                                                                                                                                                                                             ctor(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDr                                                                                                                                                                                                                                             iverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};func                                                                                                                                                                                                                                             tion H1(t,e){let{name:r,config:n}=V(t,e);return new Bd(r,n)}function V1(){return                                                                                                                                                                                                                                             {bigint:x1,bigserial:b1,boolean:mo,char:w1,cidr:_1,customType:S1,date:T1,doubleP                                                                                                                                                                                                                                             recision:kn,inet:P1,integer:jr,interval:E1,json:C1,jsonb:A1,line:k1,macaddr:O1,m                                                                                                                                                                                                                                             acaddr8:I1,numeric:R1,point:q1,geometry:j1,real:M1,serial:D1,smallint:F1,smallse                                                                                                                                                                                                                                             rial:L1,text:ee,time:$1,timestamp:ho,uuid:B1,varchar:z1,bit:U1,halfvec:G1,sparse                                                                                                                                                                                                                                             vec:Q1,vector:H1}}var Ud=Symbol.for("drizzle:PgInlineForeignKeys"),K1=Symbol.for                                                                                                                                                                                                                                             ("drizzle:EnableRLS"),Pe=class extends k{static[h]="PgTable";static Symbol=Objec                                                                                                                                                                                                                                             t.assign({},k.Symbol,{InlineForeignKeys:Ud,EnableRLS:K1});[Ud]=[];[K1]=!1;[k.Sym                                                                                                                                                                                                                                             bol.ExtraConfigBuilder]=void 0};function P9(t,e,r,n,i=t){let s=new Pe(t,n,i),a=t                                                                                                                                                                                                                                             ypeof e=="function"?e(V1()):e,o=Object.fromEntries(Object.entries(a).map(([u,p])                                                                                                                                                                                                                                             =>{let d=p;d.setName(u);let m=d.build(s);return s[Ud].push(...d.buildForeignKeys                                                                                                                                                                                                                                             (m,s)),[u,m]})),l=Object.fromEntries(Object.entries(a).map(([u,p])=>{let d=p;d.s                                                                                                                                                                                                                                             etName(u);let m=d.buildExtraConfigColumn(s);return[u,m]})),c=Object.assign(s,o);                                                                                                                                                                                                                                             return c[k.Symbol.Columns]=o,c[k.Symbol.ExtraConfigColumns]=l,r&&(c[Pe.Symbol.Ex                                                                                                                                                                                                                                             traConfigBuilder]=r),Object.assign(c,{enableRLS:()=>(c[Pe.Symbol.EnableRLS]=!0,c                                                                                                                                                                                                                                             )})}var vo=(t,e,r)=>P9(t,e,r,void 0);var go=class{static[h]="PgPrimaryKeyBuilder                                                                                                                                                                                                                                             ";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new G                                                                                                                                                                                                                                             d(e,this.columns,this.name)}},Gd=class{constructor(e,r,n){this.table=e,this.colu                                                                                                                                                                                                                                             mns=r,this.name=n}static[h]="PgPrimaryKey";columns;name;getName(){return this.na                                                                                                                                                                                                                                             me??`${this.table[Pe.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}                                                                                                                                                                                                                                             };var yo=class{constructor(e,r,n){this.sourceTable=e,this.referencedTable=r,this                                                                                                                                                                                                                                             .relationName=n,this.referencedTableName=r[k.Symbol.Name]}static[h]="Relation";r                                                                                                                                                                                                                                             eferencedTableName;fieldName},Qd=class{constructor(e,r){this.table=e,this.config                                                                                                                                                                                                                                             =r}static[h]="Relations"},ar=class t extends yo{constructor(e,r,n,i){super(e,r,n                                                                                                                                                                                                                                             ?.relationName),this.config=n,this.isNullable=i}static[h]="One";withFieldName(e)                                                                                                                                                                                                                                             {let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);                                                                                                                                                                                                                                             return r.fieldName=e,r}},is=class t extends yo{constructor(e,r,n){super(e,r,n?.r                                                                                                                                                                                                                                             elationName),this.config=n}static[h]="Many";withFieldName(e){let r=new t(this.so                                                                                                                                                                                                                                             urceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function W1                                                                                                                                                                                                                                             (){return{and:Vi,between:o1,eq:at,exists:s1,gt:Z0,gte:J0,ilike:p1,inArray:t1,isN                                                                                                                                                                                                                                             ull:n1,isNotNull:i1,like:u1,lt:Y0,lte:e1,ne:K0,not:X0,notBetween:c1,notExists:a1                                                                                                                                                                                                                                             ,notLike:l1,notIlike:d1,notInArray:r1,or:W0,sql:g}}function X1(){return{sql:g,as                                                                                                                                                                                                                                             c:f1,desc:m1}}function Z1(t,e){Object.keys(t).length===1&&"default"in t&&!w(t.de                                                                                                                                                                                                                                             fault,k)&&(t=t.default);let r={},n={},i={};for(let[s,a]of Object.entries(t))if(w                                                                                                                                                                                                                                             (a,k)){let o=qr(a),l=n[o];r[o]=s,i[s]={tsName:s,dbName:a[k.Symbol.Name],schema:a                                                                                                                                                                                                                                             [k.Symbol.Schema],columns:a[k.Symbol.Columns],relations:l?.relations??{},primary                                                                                                                                                                                                                                             Key:l?.primaryKey??[]};for(let u of Object.values(a[k.Symbol.Columns]))u.primary                                                                                                                                                                                                                                             &&i[s].primaryKey.push(u);let c=a[k.Symbol.ExtraConfigBuilder]?.(a[k.Symbol.Extr                                                                                                                                                                                                                                             aConfigColumns]);if(c)for(let u of Object.values(c))w(u,go)&&i[s].primaryKey.pus                                                                                                                                                                                                                                             h(...u.columns)}else if(w(a,Qd)){let o=qr(a.table),l=r[o],c=a.config(e(a.table))                                                                                                                                                                                                                                             ,u;for(let[p,d]of Object.entries(c))if(l){let m=i[l];m.relations[p]=d,u&&m.prima                                                                                                                                                                                                                                             ryKey.push(...u)}else o in n||(n[o]={relations:{},primaryKey:u}),n[o].relations[                                                                                                                                                                                                                                             p]=d}return{tables:i,tableNamesMap:r}}function E9(t){return function(r,n){return                                                                                                                                                                                                                                              new ar(t,r,n,n?.fields.reduce((i,s)=>i&&s.notNull,!0)??!1)}}function C9(t){retu                                                                                                                                                                                                                                             rn function(r,n){return new is(t,r,n)}}function J1(t,e,r){if(w(r,ar)&&r.config)r                                                                                                                                                                                                                                             eturn{fields:r.config.fields,references:r.config.references};let n=e[qr(r.refere                                                                                                                                                                                                                                             ncedTable)];if(!n)throw new Error(`Table "${r.referencedTable[k.Symbol.Name]}" n                                                                                                                                                                                                                                             ot found in schema`);let i=t[n];if(!i)throw new Error(`Table "${n}" not found in                                                                                                                                                                                                                                              schema`);let s=r.sourceTable,a=e[qr(s)];if(!a)throw new Error(`Table "${s[k.Sym                                                                                                                                                                                                                                             bol.Name]}" not found in schema`);let o=[];for(let l of Object.values(i.relation                                                                                                                                                                                                                                             s))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.r                                                                                                                                                                                                                                             eferencedTable===r.sourceTable)&&o.push(l);if(o.length>1)throw r.relationName?ne                                                                                                                                                                                                                                             w Error(`There are multiple relations with name "${r.relationName}" in table "${                                                                                                                                                                                                                                             n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTabl                                                                                                                                                                                                                                             e[k.Symbol.Name]}". Please specify relation name`);if(o[0]&&w(o[0],ar)&&o[0].con                                                                                                                                                                                                                                             fig)return{fields:o[0].config.references,references:o[0].config.fields};throw ne                                                                                                                                                                                                                                             w Error(`There is not enough information to infer relation "${a}.${r.fieldName}"                                                                                                                                                                                                                                             `)}function Y1(t){return{one:E9(t),many:C9(t)}}function xo(t,e,r,n,i=s=>s){let s                                                                                                                                                                                                                                             ={};for(let[a,o]of n.entries())if(o.isJson){let l=e.relations[o.tsKey],c=r[a],u=                                                                                                                                                                                                                                             typeof c=="string"?JSON.parse(c):c;s[o.tsKey]=w(l,ar)?u&&xo(t,t[o.relationTableT                                                                                                                                                                                                                                             sKey],u,o.selection,i):u.map(p=>xo(t,t[o.relationTableTsKey],p,o.selection,i))}e                                                                                                                                                                                                                                             lse{let l=i(r[a]),c=o.field,u;w(c,K)?u=c:w(c,R)?u=c.decoder:u=c.sql.decoder,s[o.                                                                                                                                                                                                                                             tsKey]=l===null?null:u.mapFromDriverValue(l)}return s}var Je=ht(Kf(),1),Dz=Je.de                                                                                                                                                                                                                                             fault.Client,Fz=Je.default.Pool,Lz=Je.default.Connection,$z=Je.default.types,Bz=                                                                                                                                                                                                                                             Je.default.Query,zz=Je.default.DatabaseError,Uz=Je.default.escapeIdentifier,Gz=J                                                                                                                                                                                                                                             e.default.escapeLiteral,Qz=Je.default.Result,Hz=Je.default.TypeOverrides,Vz=Je.d                                                                                                                                                                                                                                             efault.defaults,$n=Je.default;var le=class t{static[h]="SelectionProxyHandler";c                                                                                                                                                                                                                                             onfig;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,select                                                                                                                                                                                                                                             edFields:new Proxy(e._.selectedFields,this)};if(r===Y)return{...e[Y],selectedFie                                                                                                                                                                                                                                             lds:new Proxy(e[Y].selectedFields,this)};if(typeof r=="symbol")return e[r];let i                                                                                                                                                                                                                                             =(w(e,ge)?e._.selectedFields:w(e,Fe)?e[Y].selectedFields:e)[r];if(w(i,R.Aliased)                                                                                                                                                                                                                                             ){if(this.config.sqlAliasedBehavior==="sql"&&!i.isSelectionField)return i.sql;le                                                                                                                                                                                                                                             t s=i.clone();return s.isSelectionField=!0,s}if(w(i,R)){if(this.config.sqlBehavi                                                                                                                                                                                                                                             or==="sql")return i;throw new Error(`You tried to reference "${r}" field from a                                                                                                                                                                                                                                              subquery, which is a raw SQL field, but it doesn't have an alias declared. Pleas                                                                                                                                                                                                                                             e add an alias to the field using ".as('alias')" method.`)}return w(i,K)?this.co                                                                                                                                                                                                                                             nfig.alias?new Proxy(i,new Nr(new Proxy(i.table,new An(this.config.alias,this.co                                                                                                                                                                                                                                             nfig.replaceOriginalName??!1)))):i:typeof i!="object"||i===null?i:new Proxy(i,ne                                                                                                                                                                                                                                             w t(this.config))}};var ms=class extends Ne{constructor(e,r,n,i){super(),this.se                                                                                                                                                                                                                                             ssion=r,this.dialect=n,this.config={table:e,withList:i}}static[h]="PgDelete";con                                                                                                                                                                                                                                             fig;where(e){return this.config.where=e,this}returning(e=this.config.table[k.Sym                                                                                                                                                                                                                                             bol.Columns]){return this.config.returningFields=e,this.config.returning=ot(e),t                                                                                                                                                                                                                                             his}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typin                                                                                                                                                                                                                                             gs:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return J.                                                                                                                                                                                                                                             startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialec                                                                                                                                                                                                                                             t.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this.                                                                                                                                                                                                                                             _prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>J.star                                                                                                                                                                                                                                             tActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));g                                                                                                                                                                                                                                             etSelectedFields(){return this.config.returningFields?new Proxy(this.config.retu                                                                                                                                                                                                                                             rningFields,new le({alias:Be(this.config.table),sqlAliasedBehavior:"alias",sqlBe                                                                                                                                                                                                                                             havior:"error"})):void 0}$dynamic(){return this}};function YR(t){return(t.replac                                                                                                                                                                                                                                             e(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>                                                                                                                                                                                                                                             r.toLowerCase()).join("_")}function eq(t){return(t.replace(/['\u2019]/g,"").matc                                                                                                                                                                                                                                             h(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,n,i)=>{let s=i===0?n                                                                                                                                                                                                                                             .toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return r+s},"")}function tq(                                                                                                                                                                                                                                             t){return t}var Do=class{static[h]="CasingCache";cache={};cachedTables={};conver                                                                                                                                                                                                                                             t;constructor(e){this.convert=e==="snake_case"?YR:e==="camelCase"?eq:tq}getColum                                                                                                                                                                                                                                             nCasing(e){if(!e.keyAsName)return e.name;let r=e.table[k.Symbol.Schema]??"public                                                                                                                                                                                                                                             ",n=e.table[k.Symbol.OriginalName],i=`${r}.${n}.${e.name}`;return this.cache[i]|                                                                                                                                                                                                                                             |this.cacheTable(e.table),this.cache[i]}cacheTable(e){let r=e[k.Symbol.Schema]??                                                                                                                                                                                                                                             "public",n=e[k.Symbol.OriginalName],i=`${r}.${n}`;if(!this.cachedTables[i]){for(                                                                                                                                                                                                                                             let s of Object.values(e[k.Symbol.Columns])){let a=`${i}.${s.name}`;this.cache[a                                                                                                                                                                                                                                             ]=this.convert(s.name)}this.cachedTables[i]=!0}}clearCache(){this.cache={},this.                                                                                                                                                                                                                                             cachedTables={}}};var Bn=class extends Fe{static[h]="PgViewBase"};var lr=class{s                                                                                                                                                                                                                                             tatic[h]="PgDialect";casing;constructor(e){this.casing=new Do(e?.casing)}async m                                                                                                                                                                                                                                             igrate(e,r,n){let i=typeof n=="string"?"__drizzle_migrations":n.migrationsTable?                                                                                                                                                                                                                                             ?"__drizzle_migrations",s=typeof n=="string"?"drizzle":n.migrationsSchema??"driz                                                                                                                                                                                                                                             zle",a=g`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

error: password authentication failed for user "thorntech"
    at /var/www/thorntech/dist/index.cjs:59:14227
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5                                                                                                                                                                                                                                             )
    at async /var/www/thorntech/dist/index.cjs:65:31359
    at async UE (/var/www/thorntech/dist/index.cjs:142:6159)
    at async /var/www/thorntech/dist/index.cjs:142:13353 {
  length: 105,
  severity: 'FATAL',
  code: '28P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'auth.c',
  line: '331',
  routine: 'auth_failed'
}

Node.js v20.20.0
